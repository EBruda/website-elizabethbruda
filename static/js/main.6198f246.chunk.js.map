{"version":3,"sources":["constants.ts","log.ts","vendor/ics.js","utils.tsx","components/Button/index.tsx","components/ActionRow/index.tsx","types.ts","beans/Course.ts","beans/Section.ts","beans/SortingOption.ts","beans/Feedback.ts","beans/Oscar.ts","contexts/index.ts","components/TimeBlocks/index.tsx","components/Calendar/index.tsx","components/CombinationContainer/index.tsx","components/Course/index.tsx","components/CourseAdd/index.tsx","components/CourseContainer/index.tsx","components/CourseFilter/index.tsx","hooks/useCookie.ts","hooks/useJsonCookie.ts","hooks/useMobile.ts","components/HeaderDisplay/index.tsx","components/Header/index.tsx","components/Instructor/index.tsx","components/MapView/index.tsx","components/DaySelection/index.tsx","components/Map/index.tsx","components/NavDrawer/index.tsx","components/NavMenu/index.tsx","components/Palette/index.tsx","components/Prerequisite/index.tsx","components/Scheduler/index.tsx","components/Section/index.tsx","components/Select/index.tsx","components/Tab/index.tsx","components/Attribution/index.tsx","components/Feedback/index.tsx","components/InformationModal/index.tsx","components/App/index.tsx","hooks/useBodyClass.ts","index.tsx"],"names":["OPEN","DAYS","PALETTE","DELIVERY_MODES","CAMPUSES","Video","Online","BACKEND_BASE_URL","ErrorWithFields","message","source","fields","topMessage","Error","stack","JSON","stringify","_","rootError","getRootError","name","console","group","this","error","allFields","getAllFields","Object","keys","length","info","groupEnd","softError","logToConsole","includes","type","rest","__do_not_use_type_in_sentry_it_is_special","Sentry","contexts","fingerprint","ics","uidDomain","prodId","navigator","userAgent","indexOf","SEPARATOR","appVersion","calendarEvents","calendarStart","join","calendarEnd","BYDAY_VALUES","events","calendar","addEvent","subject","description","location","begin","stop","rrule","freq","until","Number","isNaN","Date","parse","interval","parseInt","count","byday","prototype","toString","call","d","filter","elem","pos","start_date","end_date","now_date","start_year","getFullYear","slice","start_month","getMonth","start_day","getDate","start_hours","getHours","start_minutes","getMinutes","start_seconds","getSeconds","end_year","end_month","end_day","end_hours","end_minutes","end_seconds","now_year","now_month","now_day","now_hours","now_minutes","now_seconds","start_time","end_time","rruleString","start","end","now","uDate","toISOString","substring","replace","calendarEvent","splice","push","download","filename","ext","blob","Blob","bb","BlobBuilder","append","getBlob","document","characterSet","saveAs","build","log","stringToTime","string","regexResult","exec","hour","minute","timeToString","time","ampm","hh","mm","padStart","A","timeToShortString","periodToString","period","getRandomColor","colors","flat","Math","random","getContentClassName","color","hasConflictBetween","section1","section2","meetings","some","meeting1","meeting2","day","days","classes","classList","c","isMobile","window","innerWidth","simplifyName","tokens","split","shift","pop","unique","array","Array","from","Set","isLab","section","scheduleType","isLecture","getSemesterName","term","year","semester","humanizeArrayReact","conjunction","String","init","last","trim","serializePrereqs","reqs","openPar","closePar","i","isArray","subClauses","forEach","req","id","isAxiosNetworkError","err","Button","className","disabled","href","onClick","children","rel","target","tabIndex","onKeyDown","event","key","role","ActionRow","label","actions","restProps","flatMap","action","map","icon","styling","dataTip","dataFor","onMouseEnter","onMouseLeave","fixedWidth","style","defaultTermData","desiredCourses","pinnedCrns","excludedCrns","colorMap","sortingOptionIndex","Course","oscar","courseId","data","number","title","sections","prereqs","hasLab","onlyLectures","onlyLabs","allInOnes","sectionGroups","entries","sectionId","sectionData","Section","lecture","associatedLabs","lab","startsWith","associatedLectures","lonelyLectures","lonelyLabs","distinct","groups","sectionGroupMeetings","sectionGroupHash","sectionGroup","hash","a","encodedCourse","encodeURIComponent","url","axios","get","responseData","baseId","cleanedId","gpaMap","rawAverageGpa","header","avg_gpa","actual","averageGpa","raw","instructorData","rawInstructor","instructor_name","idx","instructorGpa","GPA","instructor","nameSegments","lastName","firstName","course","crn","seating","credits","campus","deliveryMode","gradeBasis","instructors","scheduleTypeIndex","campusIndex","attributeIndices","gradeBasisIndex","scheduleTypes","campuses","attributes","attributeIndex","attribute","find","gradeBases","periodIndex","where","locationIndex","dateRangeIndex","periods","locations","dateRange","dateRanges","to","reduce","accum","prevDate","currDate","method","headers","then","response","tableRow","cheerio","load","$","eq","first","text","catch","fill","SortingOption","calculateFactor","rating","feedback","Oscar","updatedAt","version","courses","courseMap","crnMap","sortingOptions","caches","periodSegments","cacheIndex","segments","v","setHours","combination","startMap","endMap","tot","min","ends","values","starts","crnsList","dfs","courseIndex","crns","undefined","findCourse","isIncluded","isPinned","hasConflict","crnSection","findSection","pinnedOnlyLecture","pinnedOnlyLab","pinnedAllInOne","iterateTimeBlocks","combinations","sortingOption","actualSortingOptionsLength","factor","sort","b","callback","meeting","EMPTY_OSCAR","ThemeContext","React","createContext","next","TermsContext","TermContext","setTerm","patchTermData","patch","OverlayCrnsContext","makeSizeInfoKey","TimeBlocks","overlay","preview","capture","isAutosized","sizeInfo","useContext","contentClassName","sizeInfoKey","sizeInfoDay","sizeInfoPeriodDay","top","height","width","rowSize","left","rowIndex","backgroundColor","place","effect","Calendar","overlayCrns","crnSizeInfo","updateJoinedRowSizes","periodInfos","seen","curCrn","curPeriod","newRowSize","has","add","period2Info","maxMeetingLen","max","m","dayPeriodInfos","curRowSize","acc","courseSizeInfo","daySizeInfo","CombinationContainer","setOverlayCrns","handleResetPinnedCrns","useCallback","confirm","useMemo","getCombinations","sortedCombinations","sortCombinations","Select","onChange","newSortingOptionIndex","value","options","outline","rowCount","rowHeight","rowRenderer","index","onAddCourse","useState","expanded","setExpanded","prereqOpen","setPrereqOpen","paletteShown","setPaletteShown","setGpaMap","isSearching","Boolean","useEffect","fetchGpa","handleRemoveCourse","newColorMap","handleIncludeSections","hasPrereqs","instructorMap","primaryInstructor","instructorSections","excludedInstructors","every","includedInstructors","prereqControl","nextPrereqOpen","nextExpanded","prereqAction","faShareAlt","transform","infoAction","faInfoCircle","pinnedSections","totalCredits","faPlus","faAngleUp","faAngleDown","faPalette","faTrash","toFixed","Palette","onSelectColor","col","Instructor","gpa","Prerequisite","isSortKey","sortKey","CourseAdd","keyword","setKeyword","setFilter","activeIndex","setActiveIndex","inputRef","useRef","handleChangeKeyword","e","input","results","toUpperCase","keywordMatch","filterMatch","tags","sortValue","doesFilterMatchCourse","handleAddCourse","toBeExcludedCrns","timeDecided","doesFilterMatchSection","current","focus","handleKeyDown","preventDefault","handleToggleFilter","tag","handleResetFilter","activeCourse","ref","placeholder","property","labels","CourseFilter","selectedTags","onReset","onToggle","CourseContainer","ago","selectedTag","useCookieWithDefault","defaultValue","setValue","setCookieValue","val","Cookies","set","expires","useJsonCookie","useCookie","rawValue","setRawValue","parsedValue","patchValue","rawVal","useMobile","mobile","setMobile","handleResize","newMobile","addEventListener","removeEventListener","HeaderDisplay","currentTab","onChangeTab","onToggleMenu","tabs","onCopyCrns","enableCopyCrns","onExportCalendar","enableExportCalendar","onDownloadCalendar","enableDownloadCalendar","terms","currentTerm","onChangeTerm","theme","setTheme","handleThemeChange","newTheme","crnButton","faBars","tabLabel","tabIdx","Tab","active","faDownload","faCalendarAlt","faPaste","delayHide","afterShow","setTimeout","ReactTooltip","hide","faAdjust","faGithub","Header","captureRef","handleExport","cal","alert","getTime","getDay","setDate","M","T","W","R","F","exportCoursesToCalendar","handleDownload","captureElement","computed","getComputedStyle","getPropertyValue","domtoimage","toBlob","offsetWidth","offsetHeight","downloadShadowCalendar","handleCopyCrns","copy","includeSection","excludeSections","sectionList","instructorPinned","includedSections","excludedSections","excludeTooltipId","faGraduationCap","faBan","pinned","MapView","latitude","longitude","zoom","viewState","setViewState","unknown","coordsToLocationsMap","Map","coords","mapStyle","mapboxApiAccessToken","process","onViewStateChange","newViewState","coordLocations","lat","long","faMapPin","coordLocation","showZoom","showCompass","isDay","rawDay","DaySelection","courseDateMap","activeDay","setActiveDay","colorPalette","daysOfTheWeek","formatTime","floor","adjustedHour","date","padding","timeLabel","times","daysOfWeek","firstMeeting","sortedCourseDateMap","courseDataList","activeLocations","NavDrawer","open","onClose","faTimes","NavMenu","items","currentItem","onChangeItem","item","paletteColor","BASE_ITEM_STYLE","fontSize","content","PrerequisiteEmpty","op","PrerequisiteClauseDisplay","clause","subClause","PrerequisiteOption","operator","PrerequisiteHeader","PrerequisiteItem","isLast","Scheduler","setTabIndex","overlayContextValue","tabTitle","Provider","setSeating","hovering","excludeSection","sect","pinSection","faThumbtack","faChair","fetchSeating","newSeating","afterHide","opened","setOpened","selectedOption","option","faCaretDown","optionValue","optionLabel","Attribution","Feedback","submit","setSubmit","setRating","setFeedback","loading","setLoading","faCommentAlt","size","marginLeft","marginRight","FormSubmit","MODAL_COOKIE_KEY","InformationModalContent","alt","src","NAV_TABS","isValidTerm","App","swal","button","cookieKey","setTerms","setOscar","termData","filteredTermData","crnFilter","termContextValue","res","newOscar","newTerms","test","reverse","recentTerm","currentTabIndex","isDrawerOpen","setIsDrawerOpen","openDrawer","closeDrawer","ThemeLoader","AppCSSRoot","fallback","correctedTheme","isTheme","themeContextValue","useLayoutEffect","body","remove","dsn","integrations","Integrations","BrowserTracing","tracesSampleRate","ignoreErrors","release","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.6198f246.chunk.js","sourcesContent":["const OPEN = 8 * 60;\nconst CLOSE = 21 * 60;\nconst DAYS = ['M', 'T', 'W', 'R', 'F'];\n\nconst PNG_SCALE_FACTOR = 2;\n\nconst PALETTE = [\n  [\n    '#4D4D4D',\n    '#999999',\n    '#FFFFFF',\n    '#F44E3B',\n    '#FE9200',\n    '#FCDC00',\n    '#DBDF00',\n    '#A4DD00',\n    '#68CCCA',\n    '#73D8FF',\n    '#AEA1FF',\n    '#FDA1FF',\n  ],\n  [\n    '#333333',\n    '#808080',\n    '#CCCCCC',\n    '#D33115',\n    '#E27300',\n    '#FCC400',\n    '#B0BC00',\n    '#68BC00',\n    '#16A5A5',\n    '#009CE0',\n    '#7B64FF',\n    '#FA28FF',\n  ],\n  [\n    '#000000',\n    '#666666',\n    '#B3B3B3',\n    '#9F0500',\n    '#C45100',\n    '#FB9E00',\n    '#808900',\n    '#194D33',\n    '#0C797D',\n    '#0062B1',\n    '#653294',\n    '#AB149E',\n  ],\n];\n\nconst ASYNC_DELIVERY_MODE = 'Remote Asynchronous Course';\n\nconst DELIVERY_MODES: Record<string, string> = {\n  'Hybrid Course': 'Hybrid',\n  'Remote Synchronous Course': 'Remote Synchronous',\n  'Remote Asynchronous Course': 'Remote Asynchronous',\n  'Residential Course': 'Residential',\n};\n\nconst CAMPUSES: Record<string, string> = {\n  'Georgia Tech-Atlanta *': 'Atlanta',\n  'GT Lorraine-Undergrad Programs': 'Lorraine Undergrad',\n  'GT Lorraine-Graduate Programs': 'Lorraine Graduate',\n  'Georgia Tech - Shenzhen': 'Shenzhen',\n  Video: 'Video',\n  Online: 'Online',\n  'MBA Evening Program': 'MBA Evening',\n};\n\nconst BACKEND_BASE_URL = 'https://gt-scheduler.azurewebsites.net';\n\nexport {\n  OPEN,\n  CLOSE,\n  DAYS,\n  PNG_SCALE_FACTOR,\n  PALETTE,\n  ASYNC_DELIVERY_MODE,\n  DELIVERY_MODES,\n  CAMPUSES,\n  BACKEND_BASE_URL,\n};\n","// Disable no-console for the entire file since this is the only location where\n// any logging should be performed.\n/* eslint-disable no-console */\n\nimport * as Sentry from '@sentry/react';\n\nexport class ErrorWithFields extends Error {\n  fields: Record<string, unknown>;\n\n  topMessage: string;\n\n  source: Error | null;\n\n  constructor({\n    message,\n    source,\n    fields = {},\n  }: {\n    message: string;\n    source?: unknown;\n    fields?: Record<string, unknown>;\n  }) {\n    super();\n\n    this.fields = fields;\n    this.topMessage = message;\n\n    // Make sure the given source is an error if given,\n    // otherwise add its string serialization as a field\n    if (source instanceof Error) {\n      this.source = source;\n      this.message = `${message}: ${source.message}`;\n\n      // Try to inherit the stacktrace of the given error\n      // (otherwise, fall back to the stacktrace created\n      // when this error was constructed)\n      if (source.stack != null) {\n        this.stack = source.stack;\n      }\n    } else {\n      this.source = null;\n      this.message = message;\n\n      if (this.source !== null) {\n        // The source was non-null but was not an Error:\n        // add a naive string serialization as a context\n        this.fields['__non_error_source'] = 'true';\n        try {\n          this.fields['__source'] = JSON.stringify(source);\n        } catch (_) {\n          // Ignore errors here\n          this.fields['__failed_to_stringify_source'] = 'true';\n        }\n      }\n    }\n\n    // Configure the name based on whether this is wrapping\n    // an existing non-wrapped error\n    const rootError = this.getRootError();\n    if (rootError === this || rootError instanceof ErrorWithFields) {\n      this.name = 'ErrorWithFields';\n    } else {\n      this.name = `ErrorWithFields(${rootError.name})`;\n    }\n  }\n\n  logToConsole(): void {\n    console.group(this.topMessage);\n    console.error(this.getRootError());\n\n    const allFields = this.getAllFields();\n    if (Object.keys(allFields).length > 0) {\n      console.info(allFields);\n    }\n\n    console.groupEnd();\n  }\n\n  getAllFields(): Record<string, unknown> {\n    if (this.source instanceof ErrorWithFields) {\n      return { ...this.source.getAllFields(), ...this.fields };\n    }\n\n    return this.fields;\n  }\n\n  getRootError(): Error {\n    if (this.source === null) {\n      return this;\n    }\n\n    if (this.source instanceof ErrorWithFields) {\n      return this.source.getRootError();\n    }\n\n    return this.source;\n  }\n}\n\n/**\n * Logs an error to the console and reports it to Sentry.\n * Does not re-throw any errors and can be used when there is reasonable\n * fallback behavior.\n * @param error - an instance of `ErrorWithFields`\n */\nexport function softError(error: ErrorWithFields): void {\n  error.logToConsole();\n\n  // Report the error to Sentry if in production\n  if (process.env.NODE_ENV === 'production') {\n    // Ensure we don't include `type` in the fields\n    let fields = error.getAllFields();\n    if (Object.keys(fields).includes('type')) {\n      const { type, ...rest } = fields;\n      fields = { __do_not_use_type_in_sentry_it_is_special: type, ...rest };\n    }\n\n    Sentry.captureException(error.getRootError(), {\n      // https://docs.sentry.io/platforms/ruby/enriching-events/context/#structured-context\n      contexts: {\n        fields,\n        error: {\n          message: error.message,\n        },\n      },\n      fingerprint: [error.message],\n    });\n  }\n}\n","/* global saveAs, BlobBuilder */\n/* exported ics */\n\nconst ics = (uidDomain, prodId) => {\n  if (\n    navigator.userAgent.indexOf('MSIE') > -1 &&\n    navigator.userAgent.indexOf('MSIE 10') === -1\n  ) {\n    // eslint-disable-next-line no-console\n    console.log('Unsupported Browser');\n    return;\n  }\n\n  if (typeof uidDomain === 'undefined') {\n    uidDomain = 'default';\n  }\n  if (typeof prodId === 'undefined') {\n    prodId = 'Calendar';\n  }\n\n  const SEPARATOR = navigator.appVersion.indexOf('Win') !== -1 ? '\\r\\n' : '\\n';\n  const calendarEvents = [];\n  const calendarStart = [\n    'BEGIN:VCALENDAR',\n    `PRODID:${prodId}`,\n    'VERSION:2.0',\n  ].join(SEPARATOR);\n  const calendarEnd = `${SEPARATOR}END:VCALENDAR`;\n  const BYDAY_VALUES = ['SU', 'MO', 'TU', 'WE', 'TH', 'FR', 'SA'];\n\n  return {\n    /**\n     * Returns events array\n     * @return {array} Events\n     */\n    events() {\n      return calendarEvents;\n    },\n\n    /**\n     * Returns calendar\n     * @return {string} Calendar in iCalendar format\n     */\n    calendar() {\n      return (\n        calendarStart + SEPARATOR + calendarEvents.join(SEPARATOR) + calendarEnd\n      );\n    },\n\n    /**\n     * Add event to the calendar\n     * @param  {string} subject     Subject/Title of event\n     * @param  {string} description Description of event\n     * @param  {string} location    Location of event\n     * @param  {string} begin       Beginning date of event\n     * @param  {string} stop        Ending date of event\n     */\n    addEvent(subject, description, location, begin, stop, rrule) {\n      // I'm not in the mood to make these optional... So they are all required\n      if (\n        typeof subject === 'undefined' ||\n        typeof description === 'undefined' ||\n        typeof location === 'undefined' ||\n        typeof begin === 'undefined' ||\n        typeof stop === 'undefined'\n      ) {\n        return false;\n      }\n\n      // validate rrule\n      if (rrule) {\n        if (!rrule.rrule) {\n          if (\n            rrule.freq !== 'YEARLY' &&\n            rrule.freq !== 'MONTHLY' &&\n            rrule.freq !== 'WEEKLY' &&\n            rrule.freq !== 'DAILY'\n          ) {\n            throw new Error(\n              \"Recurrence rrule frequency must be provided and be one of the following: 'YEARLY', 'MONTHLY', 'WEEKLY', or 'DAILY'\"\n            );\n          }\n\n          if (rrule.until) {\n            if (Number.isNaN(Date.parse(rrule.until))) {\n              throw new Error(\n                \"Recurrence rrule 'until' must be a valid date string\"\n              );\n            }\n          }\n\n          if (rrule.interval) {\n            if (Number.isNaN(parseInt(rrule.interval, 10))) {\n              throw new Error(\"Recurrence rrule 'interval' must be an integer\");\n            }\n          }\n\n          if (rrule.count) {\n            if (Number.isNaN(parseInt(rrule.count, 10))) {\n              throw new Error(\"Recurrence rrule 'count' must be an integer\");\n            }\n          }\n\n          if (typeof rrule.byday !== 'undefined') {\n            if (\n              Object.prototype.toString.call(rrule.byday) !== '[object Array]'\n            ) {\n              throw new Error(\"Recurrence rrule 'byday' must be an array\");\n            }\n\n            if (rrule.byday.length > 7) {\n              throw new Error(\n                \"Recurrence rrule 'byday' array must not be longer than the 7 days in a week\"\n              );\n            }\n\n            // Filter any possible repeats\n            rrule.byday = rrule.byday.filter((elem, pos) => {\n              return rrule.byday.indexOf(elem) === pos;\n            });\n\n            for (const d in rrule.byday) {\n              if (BYDAY_VALUES.indexOf(rrule.byday[d]) < 0) {\n                throw new Error(\n                  \"Recurrence rrule 'byday' values must include only the following: 'SU', 'MO', 'TU', 'WE', 'TH', 'FR', 'SA'\"\n                );\n              }\n            }\n          }\n        }\n      }\n\n      // TODO add time and time zone? use moment to format?\n      const start_date = new Date(begin);\n      const end_date = new Date(stop);\n      const now_date = new Date();\n\n      const start_year = `0000${start_date.getFullYear().toString()}`.slice(-4);\n      const start_month = `00${(start_date.getMonth() + 1).toString()}`.slice(\n        -2\n      );\n      const start_day = `00${start_date.getDate().toString()}`.slice(-2);\n      const start_hours = `00${start_date.getHours().toString()}`.slice(-2);\n      const start_minutes = `00${start_date.getMinutes().toString()}`.slice(-2);\n      const start_seconds = `00${start_date.getSeconds().toString()}`.slice(-2);\n\n      const end_year = `0000${end_date.getFullYear().toString()}`.slice(-4);\n      const end_month = `00${(end_date.getMonth() + 1).toString()}`.slice(-2);\n      const end_day = `00${end_date.getDate().toString()}`.slice(-2);\n      const end_hours = `00${end_date.getHours().toString()}`.slice(-2);\n      const end_minutes = `00${end_date.getMinutes().toString()}`.slice(-2);\n      const end_seconds = `00${end_date.getSeconds().toString()}`.slice(-2);\n\n      const now_year = `0000${now_date.getFullYear().toString()}`.slice(-4);\n      const now_month = `00${(now_date.getMonth() + 1).toString()}`.slice(-2);\n      const now_day = `00${now_date.getDate().toString()}`.slice(-2);\n      const now_hours = `00${now_date.getHours().toString()}`.slice(-2);\n      const now_minutes = `00${now_date.getMinutes().toString()}`.slice(-2);\n      const now_seconds = `00${now_date.getSeconds().toString()}`.slice(-2);\n\n      let start_time = '';\n      let end_time = '';\n      if (\n        start_hours +\n          start_minutes +\n          start_seconds +\n          end_hours +\n          end_minutes +\n          end_seconds !==\n        0\n      ) {\n        start_time = `T${start_hours}${start_minutes}${start_seconds}`;\n        end_time = `T${end_hours}${end_minutes}${end_seconds}`;\n      }\n      const now_time = `T${now_hours}${now_minutes}${now_seconds}`;\n\n      const start = start_year + start_month + start_day + start_time;\n      const end = end_year + end_month + end_day + end_time;\n      const now = now_year + now_month + now_day + now_time;\n\n      // recurrence rrule vars\n      let rruleString;\n      if (rrule) {\n        if (rrule.rrule) {\n          rruleString = rrule.rrule;\n        } else {\n          rruleString = `RRULE:FREQ=${rrule.freq}`;\n\n          if (rrule.until) {\n            const uDate = new Date(Date.parse(rrule.until)).toISOString();\n            rruleString += `;UNTIL=${uDate\n              .substring(0, uDate.length - 13)\n              .replace(/[-]/g, '')}000000Z`;\n          }\n\n          if (rrule.interval) {\n            rruleString += `;INTERVAL=${rrule.interval}`;\n          }\n\n          if (rrule.count) {\n            rruleString += `;COUNT=${rrule.count}`;\n          }\n\n          if (rrule.byday && rrule.byday.length > 0) {\n            rruleString += `;BYDAY=${rrule.byday.join(',')}`;\n          }\n        }\n      }\n\n      // var stamp = new Date().toISOString();\n\n      let calendarEvent = [\n        'BEGIN:VEVENT',\n        `UID:${calendarEvents.length}@${uidDomain}`,\n        'CLASS:PUBLIC',\n        `DESCRIPTION:${description}`,\n        `DTSTAMP;VALUE=DATE-TIME:${now}`,\n        `DTSTART;VALUE=DATE-TIME:${start}`,\n        `DTEND;VALUE=DATE-TIME:${end}`,\n        `LOCATION:${location}`,\n        `SUMMARY;LANGUAGE=en-us:${subject}`,\n        'TRANSP:TRANSPARENT',\n        'END:VEVENT',\n      ];\n\n      if (rruleString) {\n        calendarEvent.splice(4, 0, rruleString);\n      }\n\n      calendarEvent = calendarEvent.join(SEPARATOR);\n\n      calendarEvents.push(calendarEvent);\n      return calendarEvent;\n    },\n\n    /**\n     * Download calendar using the saveAs function from filesave.js\n     * @param  {string} filename Filename\n     * @param  {string} ext      Extention\n     */\n    download(filename, ext) {\n      if (calendarEvents.length < 1) {\n        return false;\n      }\n\n      ext = typeof ext !== 'undefined' ? ext : '.ics';\n      filename = typeof filename !== 'undefined' ? filename : 'calendar';\n      const calendar =\n        calendarStart +\n        SEPARATOR +\n        calendarEvents.join(SEPARATOR) +\n        calendarEnd;\n\n      let blob;\n      if (navigator.userAgent.indexOf('MSIE 10') === -1) {\n        // chrome or firefox\n        blob = new Blob([calendar]);\n      } else {\n        // ie\n        const bb = new BlobBuilder();\n        bb.append(calendar);\n        blob = bb.getBlob(`text/x-vCalendar;charset=${document.characterSet}`);\n      }\n      saveAs(blob, filename + ext);\n      return calendar;\n    },\n\n    /**\n     * Build and return the ical contents\n     */\n    build() {\n      if (calendarEvents.length < 1) {\n        return false;\n      }\n\n      const calendar =\n        calendarStart +\n        SEPARATOR +\n        calendarEvents.join(SEPARATOR) +\n        calendarEnd;\n\n      return calendar;\n    },\n  };\n};\n\nexport default ics;\n","import React from 'react';\nimport domtoimage from 'dom-to-image';\nimport { saveAs } from 'file-saver';\n\nimport { Oscar, Section } from './beans';\nimport { DAYS, PALETTE, PNG_SCALE_FACTOR } from './constants';\nimport { softError, ErrorWithFields } from './log';\nimport { ICS, Period, PrerequisiteClause, Theme } from './types';\nimport ics from './vendor/ics';\n\nexport const stringToTime = (string: string): number => {\n  const regexResult = /(\\d{1,2}):(\\d{2}) (a|p)m/.exec(string);\n  if (regexResult === null) return 0;\n  const [, hour, minute, ampm] = regexResult as unknown as [\n    string,\n    string,\n    string,\n    string\n  ];\n  return ((ampm === 'p' ? 12 : 0) + (+hour % 12)) * 60 + +minute;\n};\n\nexport const timeToString = (time: number, ampm = true): string => {\n  const hour = (time / 60) | 0;\n  const minute = time % 60;\n  const hh = hour > 12 ? hour - 12 : hour;\n  const mm = `${minute}`.padStart(2, '0');\n  const A = `${hour < 12 ? 'a' : 'p'}m`;\n  return ampm ? `${hh}:${mm} ${A}` : `${hh}:${mm}`;\n};\n\nexport const timeToShortString = (time: number): string => {\n  const hour = (time / 60) | 0;\n  return `${hour > 12 ? hour - 12 : hour}${hour < 12 ? 'a' : 'p'}m`;\n};\n\nexport const periodToString = (period: Period | undefined): string =>\n  period != null\n    ? `${timeToString(period.start, false)} - ${timeToString(period.end)}`\n    : 'TBA';\n\nexport const getRandomColor = (): string => {\n  const colors = PALETTE.flat();\n  const index = (Math.random() * colors.length) | 0;\n  return colors[index] ?? '#333333';\n};\n\nexport const getContentClassName = (color: string | undefined): string => {\n  if (color == null) return 'light-content';\n  const r = parseInt(color.substring(1, 3), 16);\n  const g = parseInt(color.substring(3, 5), 16);\n  const b = parseInt(color.substring(5, 7), 16);\n  return r * 0.299 + g * 0.587 + b * 0.114 > 128\n    ? 'light-content'\n    : 'dark-content';\n};\n\nexport const hasConflictBetween = (\n  section1: Section,\n  section2: Section\n): boolean =>\n  section1.meetings.some((meeting1) =>\n    section2.meetings.some(\n      (meeting2) =>\n        meeting1.period &&\n        meeting2.period &&\n        DAYS.some(\n          (day) => meeting1.days.includes(day) && meeting2.days.includes(day)\n        ) &&\n        meeting1.period.start < meeting2.period.end &&\n        meeting2.period.start < meeting1.period.end\n    )\n  );\n\nexport const classes = (\n  ...classList: (string | boolean | null | undefined)[]\n): string => classList.filter((c) => c).join(' ');\n\nexport const isMobile = (): boolean => window.innerWidth < 1024;\n\nexport const simplifyName = (name: string): string => {\n  const tokens = name.split(' ');\n  const firstName = tokens.shift();\n  const lastName = tokens.pop();\n  return [firstName, lastName].join(' ');\n};\n\nexport function unique<T>(array: T[]): T[] {\n  return Array.from(new Set(array));\n}\n\nexport const isLab = (section: Section): boolean =>\n  ['Lab', 'Studio'].some((type) => section.scheduleType.includes(type));\n\nexport const isLecture = (section: Section): boolean =>\n  section.scheduleType.includes('Lecture');\n\nexport const getSemesterName = (term: string): string => {\n  const year = term.substring(0, 4);\n  const semester = ((): string => {\n    switch (Number.parseInt(term.substring(4), 10)) {\n      case 1:\n        return 'Winter';\n      case 2:\n      case 3:\n        return 'Spring';\n      case 5:\n      case 6:\n        return 'Summer';\n      case 8:\n      case 9:\n        return 'Fall';\n      default:\n        return 'Unknown';\n    }\n  })();\n  return `${semester} ${year}`;\n};\n\nexport function humanizeArray<T>(array: T[], conjunction = 'and'): string {\n  if (array.length <= 2) {\n    return array.join(` ${conjunction} `);\n  }\n  const init = [...array];\n  const last = init.pop();\n  return `${init.join(', ')}, ${conjunction} ${String(last)}`;\n}\n\nexport function humanizeArrayReact<T>(\n  array: T[],\n  conjunction: React.ReactNode = 'and'\n): React.ReactNode {\n  if (array.length === 0) {\n    return null;\n  }\n  if (array.length === 1) {\n    return String(array[0]);\n  }\n  if (array.length === 2) {\n    return (\n      <>\n        {String(array[0])} {conjunction} {String(array[1])}\n      </>\n    );\n  }\n\n  const init = [...array];\n  const last = init.pop();\n  return (\n    <>\n      {`${init.join(', ')},`.trim()} {conjunction} {String(last)}\n    </>\n  );\n}\n\nexport const serializePrereqs = (\n  reqs: PrerequisiteClause,\n  openPar = false,\n  closePar = false\n): string => {\n  // This function accepts the index of a sub-clause\n  // from the sub-clause slice of a compound prereq clause\n  // (i.e. the [...sub-clauses] part of a clause\n  // that itself is of the form [operator, ...sub-clauses]).\n  // As such, we compare to the clause length - 2\n  // (since the sub-clauses[0] is really reqs[1])\n  const last = (i: number): boolean =>\n    Array.isArray(reqs) && i === reqs.length - 2;\n  let string = '';\n\n  if (!Array.isArray(reqs)) {\n    string += (openPar ? '(' : '') + reqs.id + (closePar ? ')' : '');\n  } else if (reqs[0] === 'and') {\n    const [, ...subClauses] = reqs;\n    subClauses.forEach((req, i) => {\n      string +=\n        serializePrereqs(req, i === 0, last(i)) + (last(i) ? '' : ' and ');\n    });\n  } else if (reqs[0] === 'or') {\n    const [, ...subClauses] = reqs;\n    subClauses.forEach((req, i) => {\n      string += serializePrereqs(req) + (last(i) ? '' : ' or ');\n    });\n  }\n\n  return string;\n};\n\n// Determines whether an error is an axios network error,\n// which is used when determining whether to send it to Sentry\n// (since we can't do anything about a client-side NetworkError)--\n// it's either an error in the user's network\n// or downtime in a third-party service.\nexport const isAxiosNetworkError = (err: unknown): boolean => {\n  return err instanceof Error && err.message.includes('Network Error');\n};\n\n/**\n * Exports the current schedule to a `.ics` file,\n * which allows for importing into a third-party calendar application.\n */\nexport function exportCoursesToCalendar(\n  oscar: Oscar,\n  pinnedCrns: string[]\n): void {\n  const cal = ics() as ICS | undefined;\n  if (cal == null) {\n    window.alert('This browser does not support calendar export');\n    softError(\n      new ErrorWithFields({\n        message: 'ics() returned null or undefined',\n      })\n    );\n\n    return;\n  }\n\n  pinnedCrns.forEach((crn) => {\n    const section = oscar.findSection(crn);\n    if (section == null) return;\n\n    section.meetings.forEach((meeting) => {\n      if (!meeting.period || !meeting.days.length) return;\n      const { from, to } = meeting.dateRange;\n      const subject = section.course.id;\n      const description = section.course.title;\n      const location = meeting.where;\n      const begin = new Date(from.getTime());\n      while (\n        !meeting.days.includes(\n          ['-', 'M', 'T', 'W', 'R', 'F', '-'][begin.getDay()] ?? '-'\n        )\n      ) {\n        begin.setDate(begin.getDate() + 1);\n      }\n      begin.setHours(meeting.period.start / 60, meeting.period.start % 60);\n      const end = new Date(begin.getTime());\n      end.setHours(meeting.period.end / 60, meeting.period.end % 60);\n      const rrule = {\n        freq: 'WEEKLY',\n        until: to,\n        byday: meeting.days\n          .map(\n            (day) =>\n              ({ M: 'MO', T: 'TU', W: 'WE', R: 'TH', F: 'FR' }[day] ?? null)\n          )\n          .filter((day) => !!day),\n      };\n      cal.addEvent(subject, description, location, begin, end, rrule);\n    });\n  });\n  cal.download('gt-scheduler');\n}\n\n/**\n * Downloads a screenshot of the \"shadow\" calendar\n * that exists invisible in the app\n * and reflects the current state of the scheduler.\n * Allows the screenshot to be exported consistently\n * regardless of screen size or app state.\n * Requires the theme to style the background before taking the screenshot.\n */\nexport function downloadShadowCalendar(\n  captureElement: HTMLDivElement,\n  theme: Theme\n): void {\n  const computed = window\n    .getComputedStyle(captureElement)\n    .getPropertyValue('left');\n\n  domtoimage\n    .toBlob(captureElement, {\n      width: captureElement.offsetWidth * PNG_SCALE_FACTOR,\n      height: captureElement.offsetHeight * PNG_SCALE_FACTOR,\n      style: {\n        transform: `scale(${PNG_SCALE_FACTOR})`,\n        'transform-origin': `${computed} 0px`,\n        'background-color': theme === 'light' ? '#FFFFFF' : '#333333',\n      },\n    })\n    .then((blob) => saveAs(blob, 'schedule.png'))\n    .catch((err) =>\n      softError(\n        new ErrorWithFields({\n          message:\n            'could not take screenshot of shadow calendar for schedule export',\n          source: err,\n        })\n      )\n    );\n}\n","import React from 'react';\n\nimport { classes } from '../../utils';\n\nimport './stylesheet.scss';\n\nexport type ButtonProps = {\n  className?: string;\n  disabled?: boolean;\n  href?: string;\n  onClick?: () => void;\n  children?: React.ReactNode;\n};\n\nexport default function Button({\n  className,\n  disabled = false,\n  href,\n  onClick,\n  children,\n}: ButtonProps): React.ReactElement {\n  if (disabled)\n    return (\n      <div className={classes('Button', 'disabled', className)}>{children}</div>\n    );\n\n  if (href != null)\n    return (\n      <a\n        className={classes('Button', className)}\n        href={href}\n        rel=\"noopener noreferrer\"\n        target=\"_blank\"\n      >\n        {children}\n      </a>\n    );\n\n  return (\n    <div\n      className={classes('Button', className)}\n      onClick={onClick}\n      tabIndex={0}\n      onKeyDown={(event): void => {\n        // Intercept enter presses\n        if (event.key === 'Enter' && onClick != null) onClick();\n      }}\n      role=\"button\"\n    >\n      {children}\n    </div>\n  );\n}\n","import React from 'react';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\n\nimport { classes } from '../../utils';\nimport Button, { ButtonProps } from '../Button';\n\nimport './stylesheet.scss';\n\ntype FontAwesomeProps = React.ComponentProps<typeof FontAwesomeIcon>;\nexport type Action = {\n  icon: FontAwesomeProps['icon'];\n  styling?: React.CSSProperties;\n  dataTip?: boolean;\n  dataFor?: string;\n  onMouseEnter?: () => void;\n  onMouseLeave?: () => void;\n} & Omit<ButtonProps, 'children'>;\n\ntype BaseActionRowProps = {\n  label: string;\n  actions: (Action | null | undefined)[];\n  className?: string;\n  children?: React.ReactNode;\n};\nexport type ActionRowProps = BaseActionRowProps &\n  Omit<React.HTMLAttributes<HTMLDivElement>, keyof BaseActionRowProps>;\n\nexport default function ActionRow({\n  className,\n  label,\n  children,\n  actions,\n  ...restProps\n}: ActionRowProps): React.ReactElement {\n  return (\n    <div className={classes('ActionRow', className)} {...restProps}>\n      <div className=\"action-row-header\">\n        <div className=\"label\">{label}</div>\n        <div className={classes('actions', 'default')}>\n          {actions\n            .flatMap((action) => (action != null ? [action] : []))\n            .map(\n              (\n                {\n                  icon,\n                  styling,\n                  dataTip,\n                  dataFor,\n                  onMouseEnter,\n                  onMouseLeave,\n                  ...rest\n                },\n                i\n              ) => (\n                <Button className=\"action\" {...rest} key={i}>\n                  <FontAwesomeIcon\n                    fixedWidth\n                    style={styling}\n                    icon={icon}\n                    data-tip={dataTip}\n                    data-for={dataFor}\n                    onMouseEnter={onMouseEnter}\n                    onMouseLeave={onMouseLeave}\n                  />\n                </Button>\n              )\n            )}\n        </div>\n      </div>\n      {children}\n    </div>\n  );\n}\n","export type Theme = 'light' | 'dark';\n\nexport function isTheme(theme: string): theme is Theme {\n  switch (theme) {\n    case 'light':\n    case 'dark':\n      return true;\n    default:\n      return false;\n  }\n}\n\nexport type TermData = {\n  desiredCourses: string[];\n  pinnedCrns: string[];\n  excludedCrns: string[];\n  colorMap: Record<string, string>;\n  sortingOptionIndex: number;\n};\n\nexport const defaultTermData: TermData = {\n  desiredCourses: [],\n  pinnedCrns: [],\n  excludedCrns: [],\n  colorMap: {},\n  sortingOptionIndex: 0,\n};\n\n// Declare (better) types for the ICS library\nexport type ICS = {\n  download(filename: string, ext?: string): string | false;\n  addEvent(\n    subject: string,\n    description: string,\n    location: string,\n    begin: string | Date,\n    stop: string | Date,\n    rrule: unknown\n  ): false | string[];\n};\n\nexport interface Combination {\n  crns: string[];\n  startMap: Record<string, number>;\n  endMap: Record<string, number>;\n}\n\nexport interface Period {\n  start: number;\n  end: number;\n}\n\nexport interface DateRange {\n  from: Date;\n  to: Date;\n}\n\nexport interface Location {\n  lat: number;\n  long: number;\n}\n\nexport interface Meeting {\n  period: Period | undefined;\n  days: string[];\n  where: string;\n  location: Location | null;\n  instructors: string[];\n  dateRange: DateRange;\n}\n\nexport interface CourseGpa {\n  averageGpa?: number;\n  [instructor: string]: number | undefined;\n}\n\n// Meeting type (imported as `CrawlerMeeting`):\n// Copied from https://github.com/gt-scheduler/crawler/blob/master/src/types.ts\n\nexport type CrawlerMeeting = [\n  /**\n   * an integer index into `caches.periods`,\n   * specifying the class's start/end times\n   */\n  periodIndex: number,\n  /**\n   * a string specifying what days the class takes place on\n   * (e.g. `\"MW\"` or `\"TR\"`)\n   */\n  days: string,\n  /**\n   * a string giving the room/location where the course will be held\n   * (e.g. `\"College of Business 224\"`)\n   */\n  room: string,\n  /**\n   * an integer index into `caches.locations`,\n   * containing the latitude and longitude for a given course\n   */\n  locationIndex: number,\n  /**\n   * an array of strings listing all the instructors for this section,\n   * along with a 1-character code to mark the principal instructor\n   * (e.g. `[\"Katarzyna Rubar (P)\"]`)\n   */\n  instructors: string[],\n  /**\n   * an integer index into `caches.dateRanges`,\n   * specifying the start/end date of the class this semester\n   */\n  dateRangeIndex: number\n];\n\n// Section type (imported as `CrawlerSection`):\n// Copied from https://github.com/gt-scheduler/crawler/blob/master/src/types.ts\n\n/**\n * Contains  information about the course's section\n * (**Note** that this is an **array** (tuple), not an object)\n */\nexport type CrawlerSection = [\n  /**\n   * the CRN number of this section of the course\n   */\n  crn: string,\n  /**\n   * array of information about the section's meeting\n   * times/places/professors/etc.; in most cases, this array will only contain\n   * 1 item\n   */\n  meetings: CrawlerMeeting[],\n  /**\n   * integer number of credit hours this course is worth\n   */\n  creditHours: number,\n  /**\n   * integer index into `caches.scheduleTypes`\n   */\n  scheduleTypeIndex: number,\n  /**\n   * integer index into `caches.campuses`,\n   * specifying which campus the class is being taught at\n   */\n  campusIndex: number,\n  /**\n   * array of integer indices into `caches.attributes`,\n   * specifying any additional attributes the course has\n   */\n  attributeIndices: number[],\n  /**\n   * integer index into caches.gradeBases,\n   * specifying the grading scheme of the class\n   */\n  gradeBaseIndex: number\n];\n\n// Prerequisite types:\n// Copied from https://github.com/gt-scheduler/crawler/blob/master/src/types.ts\n\nexport type MinimumGrade = 'A' | 'B' | 'C' | 'D' | 'T';\nexport type PrerequisiteCourse = { id: string; grade?: MinimumGrade };\nexport type PrerequisiteClause = PrerequisiteCourse | PrerequisiteSet;\nexport type PrerequisiteOperator = 'and' | 'or';\nexport type PrerequisiteSet = [\n  operator: PrerequisiteOperator,\n  ...clauses: PrerequisiteClause[]\n];\n\n/**\n * Recursive data structure that is the sequence of all prerequisites in prefix\n * notation, parsed from the information on Oscar\n *\n * @example\n *\n * ```json\n   [\n     \"and\",\n     [\n       \"or\",\n       {\"id\":\"CS 3510\", \"grade\":\"C\"},\n       {\"id\":\"CS 3511\", \"grade\":\"C\"}\n     ]\n   ]\n * ```\n */\nexport type CrawlerPrerequisites = PrerequisiteSet | [];\n\n// Caches type (imported as `CrawlerCaches`):\n// Copied from https://github.com/gt-scheduler/crawler/blob/master/src/types.ts\n\n/**\n * Contains data shared by multiple class descriptions\n */\nexport interface CrawlerCaches {\n  /**\n   * List of all the different time ranges that classes can be offered at\n   * (e.g. `\"8:00 am - 8:50 am\"`;\n   * there is one `\"TBA\"` string for classes whose time is \"To Be Announced\")\n   */\n  periods: string[];\n  /**\n   * List of all possible start/ending dates that classes can be offered between\n   * (e.g. `\"Aug 17, 2020 - Dec 10, 2020\"`)\n   */\n  dateRanges: string[];\n  /**\n   * List of the different types of classes for each time block\n   * (e.g. `\"Lecture*\"`, `\"Recitation*\"`, or `\"Internship/Practicum*\"`)\n   */\n  scheduleTypes: string[];\n  /**\n   * List of the different GT campus locations that a class could take place at\n   * (e.g. `\"Georgia Tech-Atlanta *\"` or `\"Online\"`)\n   */\n  campuses: string[];\n  /**\n   * List of other miscellaneous attributes that can be associated with a class\n   * (e.g. `\"Hybrid Course\"`, `\"Honors Program\"`, or `\"Capstone\"`)\n   */\n  attributes: string[];\n  /**\n   * List of the different kinds of grading schemes a course can have\n   */\n  gradeBases: string[];\n  /**\n   * List of the different building locations a class can be at\n   */\n  locations: Location[];\n}\n\n// Course type (imported as `CrawlerCourse`):\n// Copied from https://github.com/gt-scheduler/crawler/blob/master/src/types.ts\n\n/**\n * Contains information about a single class\n * (**Note** that this is an **array** (tuple), not an object)\n */\nexport type CrawlerCourse = [\n  /**\n   * the full, human-readable name of the course (e.g. \"Accounting I\")\n   */\n  fullName: string,\n  /**\n   * a JSON object with information about each section of the course;\n   * the section IDs are the keys (`\"A\"`, `\"B\"`, `\"S2\"`, etc.)\n   */\n  sections: Record<string, CrawlerSection>,\n  /**\n     * a tree of prerequisite classes and the necessary grades in them\n     * (using boolean expressions in prefix order)\n     *\n     * @example\n     *\n     * ```json\n       [\n         \"and\",\n         [\n            \"or\",\n            {\"id\":\"CS 3510\", \"grade\":\"C\"},\n            {\"id\":\"CS 3511\", \"grade\":\"C\"}\n         ]\n       ]\n     * ```\n     */\n  // ! Type had `undefined` explicitly added to ensure we check when accessing\n  prerequisites: CrawlerPrerequisites | undefined,\n  /**\n   * Description pulled from Oscar\n   */\n  description: string | null\n];\n\n// TermData type (imported as `CrawlerTermData`):\n// Copied from https://github.com/gt-scheduler/crawler/blob/master/src/types.ts\n\n/**\n * Primary JSON object returned by the API.\n * See https://github.com/GTBitsOfGood/gt-scheduler/issues/1#issuecomment-694326220\n * for more info on the shape\n */\nexport interface CrawlerTermData {\n  /**\n   * Contains information about each class;\n   * this makes up the vast bulk of the resultant JSON.\n   * The course IDs are the keys (`\"ACCT 2101\"`, `\"CS 2340\"`, etc.)\n   */\n  courses: Record<string, CrawlerCourse>;\n  /**\n   * Contains data shared by multiple class descriptions\n   */\n  caches: CrawlerCaches;\n  /**\n   * Contains the time this JSON file was retrieved\n   */\n  updatedAt: Date;\n  /**\n   * Version number for the term data\n   */\n  version: number;\n}\n","import axios from 'axios';\n\nimport { Oscar, Section } from '.';\nimport {\n  CourseGpa,\n  CrawlerCourse,\n  CrawlerPrerequisites,\n  Period,\n} from '../types';\nimport {\n  hasConflictBetween,\n  isLab,\n  isLecture,\n  isAxiosNetworkError,\n} from '../utils';\nimport { ErrorWithFields, softError } from '../log';\n\ninterface SectionGroupMeeting {\n  days: string[];\n  period: Period | undefined;\n}\n\ninterface SectionGroup {\n  /**\n   * Equal to`JSON.stringify(this.sectionGroupMeetings)`\n   */\n  hash: string;\n  meetings: SectionGroupMeeting[];\n  sections: Section[];\n}\n\nexport default class Course {\n  id: string;\n\n  subject: string;\n\n  number: string;\n\n  title: string;\n\n  sections: Section[];\n\n  prereqs: CrawlerPrerequisites | undefined;\n\n  hasLab: boolean;\n\n  onlyLectures: Section[] | undefined;\n\n  onlyLabs: Section[] | undefined;\n\n  allInOnes: Section[] | undefined;\n\n  sectionGroups: Record<string, SectionGroup> | undefined;\n\n  term: string;\n\n  constructor(oscar: Oscar, courseId: string, data: CrawlerCourse) {\n    this.term = oscar.term;\n    const [title, sections, prereqs] = data;\n\n    this.id = courseId;\n    const [subject, number] = this.id.split(' ');\n    if (subject == null || number == null) {\n      throw new ErrorWithFields({\n        message: 'course ID could not be parsed',\n        fields: {\n          id: this.id,\n          subject,\n          number,\n          term: this.term,\n        },\n      });\n    }\n    this.subject = subject;\n    this.number = number;\n\n    this.title = title;\n    this.sections = Object.entries(sections).flatMap<Section>(\n      ([sectionId, sectionData]) => {\n        if (sectionData == null) return [];\n        try {\n          return [new Section(oscar, this, sectionId, sectionData)];\n        } catch (err) {\n          softError(\n            new ErrorWithFields({\n              message: 'could not construct Section bean',\n              source: err,\n              fields: {\n                courseId,\n                term: this.term,\n              },\n            })\n          );\n          return [];\n        }\n      }\n    );\n    this.prereqs = prereqs;\n\n    const onlyLectures = this.sections.filter(\n      (section) => isLecture(section) && !isLab(section)\n    );\n    const onlyLabs = this.sections.filter(\n      (section) => isLab(section) && !isLecture(section)\n    );\n    this.hasLab = !!onlyLectures.length && !!onlyLabs.length;\n    if (this.hasLab) {\n      for (const lecture of onlyLectures) {\n        lecture.associatedLabs = onlyLabs.filter((lab) =>\n          lab.id.startsWith(lecture.id)\n        );\n      }\n      for (const lab of onlyLabs) {\n        lab.associatedLectures = onlyLectures.filter((lecture) =>\n          lab.id.startsWith(lecture.id)\n        );\n      }\n      const lonelyLectures = onlyLectures.filter(\n        (lecture) => !lecture.associatedLabs.length\n      );\n      const lonelyLabs = onlyLabs.filter(\n        (lab) => !lab.associatedLectures.length\n      );\n      for (const lecture of lonelyLectures) {\n        lecture.associatedLabs = lonelyLabs.filter(\n          (lab) => !hasConflictBetween(lecture, lab)\n        );\n      }\n      for (const lab of lonelyLabs) {\n        lab.associatedLectures = lonelyLectures.filter(\n          (lecture) => !hasConflictBetween(lecture, lab)\n        );\n      }\n      this.onlyLectures = onlyLectures;\n      this.onlyLabs = onlyLabs;\n      this.allInOnes = this.sections.filter(\n        (section) => isLecture(section) && isLab(section)\n      );\n    } else {\n      this.sectionGroups = this.distinct(this.sections);\n    }\n  }\n\n  distinct(sections: Section[]): Record<string, SectionGroup> {\n    const groups: Record<string, SectionGroup> = {};\n    sections.forEach((section) => {\n      const sectionGroupMeetings = section.meetings.map<SectionGroupMeeting>(\n        ({ days, period }) => ({\n          days,\n          period,\n        })\n      );\n      const sectionGroupHash = JSON.stringify(sectionGroupMeetings);\n      const sectionGroup = groups[sectionGroupHash];\n      if (sectionGroup) {\n        sectionGroup.sections.push(section);\n      } else {\n        groups[sectionGroupHash] = {\n          hash: sectionGroupHash,\n          meetings: sectionGroupMeetings,\n          sections: [section],\n        };\n      }\n    });\n    return groups;\n  }\n\n  async fetchGpa(): Promise<CourseGpa> {\n    const base =\n      'https://c4citk6s9k.execute-api.us-east-1.amazonaws.com/test/data';\n    // We have to clean up the course ID before sending it to the API,\n    // since courses like CHEM 1212K should become CHEM 1212\n    const id = `${this.subject} ${this.number.replace(/\\D/g, '')}`;\n    const encodedCourse = encodeURIComponent(id);\n    const url = `${base}/course?courseID=${encodedCourse}`;\n\n    let responseData: CourseDetailsAPIResponse;\n    try {\n      responseData = (await axios.get<CourseDetailsAPIResponse>(url)).data;\n    } catch (err) {\n      // Ignore network errors\n      if (!isAxiosNetworkError(err)) {\n        softError(\n          new ErrorWithFields({\n            message: 'error fetching course details from Course Critique API',\n            source: err,\n            fields: {\n              baseId: this.id,\n              cleanedId: id,\n              url,\n              term: this.term,\n            },\n          })\n        );\n      }\n\n      return {};\n    }\n\n    // Extract the relevant fields from the response\n    // We catch (or even throw) errors here to defensively ensure that\n    // the data coming out of this function is safely typed\n    try {\n      const gpaMap: CourseGpa = {};\n\n      // Extract the course-wide average GPA\n      const rawAverageGpa = responseData.header[0].avg_gpa;\n      // If the field is null, then the course has no GPA information\n      if (rawAverageGpa === null) return {};\n      if (typeof rawAverageGpa !== 'number')\n        throw new ErrorWithFields({\n          message: `data at \".header[0].avg_gpa\" was not a number`,\n          fields: {\n            actual: rawAverageGpa,\n            term: this.term,\n          },\n        });\n      gpaMap.averageGpa = rawAverageGpa;\n\n      // Extract the GPA for each instructor\n      responseData.raw.forEach((instructorData, i) => {\n        // Extract the instructor's name\n        const rawInstructor = instructorData.instructor_name;\n        if (typeof rawInstructor !== 'string')\n          throw new ErrorWithFields({\n            message: `data at \".raw[idx].instructor_name\" was not a string`,\n            fields: {\n              idx: i,\n              actual: rawInstructor,\n              term: this.term,\n            },\n          });\n\n        // Extract the instructor's GPA\n        const instructorGpa = instructorData.GPA;\n        if (typeof instructorGpa !== 'number')\n          throw new ErrorWithFields({\n            message: `data at \".raw[idx].GPA\" was not a number`,\n            fields: {\n              idx: i,\n              actual: instructorGpa,\n              term: this.term,\n            },\n          });\n\n        // Normalize the instructor name from \"LN, FN\" to \"FN LN\"\n        let instructor = rawInstructor;\n        const nameSegments = instructor.split(', ');\n        if (nameSegments.length === 2) {\n          const [lastName, firstName] = nameSegments as [string, string];\n          instructor = `${firstName} ${lastName}`;\n        }\n\n        gpaMap[instructor] = instructorGpa;\n      });\n\n      return gpaMap;\n    } catch (err) {\n      softError(\n        new ErrorWithFields({\n          message:\n            'error extracting course GPA from Course Critique API response',\n          source: err,\n          fields: {\n            baseId: this.id,\n            cleanedId: id,\n            url,\n            term: this.term,\n          },\n        })\n      );\n      return {};\n    }\n  }\n}\n\n// Based on response for CS 6035 on 2021-08-28\n// from the Course Critique API.\n// Each field has `| unknown` added to ensure\n// that we narrow the type before using them.\ninterface CourseDetailsAPIResponse {\n  header: [\n    {\n      course_name: string | null | unknown;\n      description: string | null | unknown;\n      credits: number | null | unknown;\n      avg_gpa: number | null | unknown;\n      avg_a: number | null | unknown;\n      avg_b: number | null | unknown;\n      avg_c: number | null | unknown;\n      avg_d: number | null | unknown;\n      avg_f: number | null | unknown;\n      avg_w: number | null | unknown;\n      full_name: string | null | unknown;\n    }\n  ];\n  raw: Array<{\n    instructor_gt_username: string | unknown;\n    instructor_name: string | unknown;\n    link: string | unknown;\n    class_size_group: string | unknown;\n    GPA: number | unknown;\n    A: number | unknown;\n    B: number | unknown;\n    C: number | unknown;\n    D: number | unknown;\n    F: number | unknown;\n    W: number | unknown;\n    sections: number | unknown;\n  }>;\n}\n","import axios from 'axios';\nimport cheerio from 'cheerio';\n\nimport { unique } from '../utils';\nimport { DELIVERY_MODES, BACKEND_BASE_URL } from '../constants';\nimport Course from './Course';\nimport Oscar from './Oscar';\nimport { CrawlerMeeting, Meeting } from '../types';\n\nexport type Seating = [\n  seating:\n    | [] // Loading state\n    | [\n        // Loaded state\n        seatsCurrent: number,\n        seatsTotal: number,\n        waitlistCurrent: number,\n        waitlistTotal: number\n      ]\n    | string[], // Error state\n  fetchTime: number\n];\n\ntype SectionConstructionData = [\n  crn: string,\n  meetings: CrawlerMeeting[],\n  credits: number,\n  scheduleTypeIndex: number,\n  campusIndex: number,\n  attributeIndices: number[],\n  gradeBasisIndex: number\n];\n\nexport default class Section {\n  course: Course;\n\n  id: string;\n\n  crn: string;\n\n  seating: Seating;\n\n  credits: number;\n\n  scheduleType: string;\n\n  campus: string;\n\n  deliveryMode: string | undefined;\n\n  gradeBasis: string;\n\n  meetings: Meeting[];\n\n  instructors: string[];\n\n  // This field is initialized after construction inside `Course.constructor`\n  associatedLabs: Section[];\n\n  // This field is initialized after construction inside `Course.constructor`\n  associatedLectures: Section[];\n\n  term: string;\n\n  constructor(\n    oscar: Oscar,\n    course: Course,\n    sectionId: string,\n    data: SectionConstructionData\n  ) {\n    this.term = oscar.term;\n    const [\n      crn,\n      meetings,\n      credits,\n      scheduleTypeIndex,\n      campusIndex,\n      attributeIndices,\n      gradeBasisIndex,\n    ] = data;\n\n    this.course = course;\n    this.id = sectionId;\n    this.crn = crn;\n    this.seating = [[], 0];\n    this.credits = credits;\n    this.scheduleType = oscar.scheduleTypes[scheduleTypeIndex] ?? 'unknown';\n    this.campus = oscar.campuses[campusIndex] ?? 'unknown';\n\n    const attributes = attributeIndices\n      .map((attributeIndex) => oscar.attributes[attributeIndex])\n      .flatMap((attribute) => (attribute == null ? [] : [attribute]));\n    this.deliveryMode = attributes.find(\n      (attribute) => attribute in DELIVERY_MODES\n    );\n\n    this.gradeBasis = oscar.gradeBases[gradeBasisIndex] ?? 'unknown';\n    this.meetings = meetings.map<Meeting>(\n      ([\n        periodIndex,\n        days,\n        where,\n        locationIndex,\n        instructors,\n        dateRangeIndex,\n      ]) => ({\n        period: oscar.periods[periodIndex],\n        days: days === '&nbsp;' ? [] : days.split(''),\n        where,\n        location: oscar.locations[locationIndex] ?? null,\n        instructors: instructors.map((instructor) =>\n          instructor.replace(/ \\(P\\)$/, '')\n        ),\n        // We need some fallback here\n        dateRange: oscar.dateRanges[dateRangeIndex] ?? {\n          from: new Date(),\n          to: new Date(),\n        },\n      })\n    );\n    this.instructors = unique(\n      this.meetings\n        .map<string[]>(({ instructors }) => instructors)\n        .reduce((accum, instructors) => [...accum, ...instructors], [])\n    );\n\n    // These fields are initialized after construction\n    // inside `Course.constructor`\n    this.associatedLabs = [];\n    this.associatedLectures = [];\n  }\n\n  async fetchSeating(term: string): Promise<Seating> {\n    const prevDate = this.seating[1];\n    const currDate = Date.now();\n\n    if (currDate - prevDate > 300000) {\n      const url = `${BACKEND_BASE_URL}/proxy/class_section?term=${term}&crn=${this.crn}`;\n      return axios({\n        url,\n        method: 'get',\n        headers: {\n          'X-Requested-With': 'XMLHttpRequest',\n          'Content-Type': 'text/html',\n        },\n      })\n        .then((response) => {\n          const $ = cheerio.load(response.data);\n          const availabilityTable = $('.datadisplaytable .datadisplaytable');\n          const tableRow = availabilityTable.find('tr');\n\n          this.seating = [\n            [\n              parseInt(tableRow.eq(1).children('td').first().text(), 10),\n              parseInt(tableRow.eq(1).children('td').eq(1).text(), 10),\n              parseInt(tableRow.eq(2).children('td').first().text(), 10),\n              parseInt(tableRow.eq(2).children('td').eq(1).text(), 10),\n            ],\n            currDate,\n          ];\n\n          return this.seating;\n        })\n        .catch(() => [new Array(4).fill('N/A'), currDate]);\n    }\n    return this.seating;\n  }\n}\n","import { Combination } from '../types';\n\nexport default class SortingOption {\n  label: string;\n\n  calculateFactor: (combo: Combination) => number;\n\n  constructor(label: string, calculateFactor: (combo: Combination) => number) {\n    this.label = label;\n    this.calculateFactor = calculateFactor;\n  }\n}\n","import axios from 'axios';\n\nimport { BACKEND_BASE_URL } from '../constants';\n\nexport default async function FormSubmit({\n  rating,\n  feedback,\n}: {\n  rating: number;\n  feedback: string;\n}): Promise<void> {\n  const url = `${BACKEND_BASE_URL}/feedback`;\n  await axios({\n    method: 'post',\n    url,\n    data: {\n      rating,\n      feedback,\n    },\n    headers: {\n      'Content-Type': 'application/json;charset=UTF-8',\n    },\n  });\n}\n","import { Course, Section, SortingOption } from '.';\nimport { hasConflictBetween, stringToTime } from '../utils';\nimport {\n  Combination,\n  Period,\n  DateRange,\n  Location,\n  CrawlerTermData,\n} from '../types';\nimport { ErrorWithFields, softError } from '../log';\n\n// `new Oscar(...)` gets the entirety of the crawler JSON data\ntype OscarConstructionDate = CrawlerTermData;\n\nexport default class Oscar {\n  periods: (Period | undefined)[];\n\n  dateRanges: DateRange[];\n\n  scheduleTypes: string[];\n\n  campuses: string[];\n\n  attributes: string[];\n\n  gradeBases: string[];\n\n  locations: (Location | null)[];\n\n  updatedAt: Date;\n\n  version: number;\n\n  courses: Course[];\n\n  courseMap: Record<string, Course>;\n\n  crnMap: Record<string, Section>;\n\n  sortingOptions: SortingOption[];\n\n  constructor(data: OscarConstructionDate, public term: string) {\n    const { courses, caches, updatedAt, version } = data;\n\n    this.periods = caches.periods.map((period, i) => {\n      if (period === 'TBA') {\n        return undefined;\n      }\n\n      const periodSegments = period.split(' - ');\n      if (periodSegments.length !== 2) {\n        softError(\n          new ErrorWithFields({\n            message: 'period did not follow expected format',\n            fields: {\n              period,\n              cacheIndex: i,\n              term: this.term,\n            },\n          })\n        );\n        return undefined;\n      }\n\n      const [start, end] = periodSegments as [string, string];\n      return {\n        start: stringToTime(start),\n        end: stringToTime(end),\n      };\n    });\n\n    this.dateRanges = caches.dateRanges.map((dateRange, i) => {\n      let segments = dateRange.split(' - ');\n      if (segments.length !== 2) {\n        softError(\n          new ErrorWithFields({\n            message: 'date range did not follow expected format',\n            fields: {\n              dateRange,\n              cacheIndex: i,\n              term: this.term,\n            },\n          })\n        );\n        // We need some fallback here\n        segments = ['Jan 1, 1970', 'Jan 2, 1970'];\n      }\n\n      const [from, to] = segments.map((v) => new Date(v)) as [Date, Date];\n      from.setHours(0);\n      to.setHours(23, 59, 59, 999);\n      return { from, to };\n    });\n\n    this.scheduleTypes = caches.scheduleTypes;\n    this.campuses = caches.campuses;\n    this.attributes = caches.attributes;\n    this.gradeBases = caches.gradeBases;\n    this.locations = caches.locations;\n    this.updatedAt = new Date(updatedAt);\n    this.version = version;\n\n    this.courses = Object.entries(courses).flatMap(([courseId, source]) => {\n      try {\n        return [new Course(this, courseId, source)];\n      } catch (err) {\n        softError(\n          new ErrorWithFields({\n            message: 'could not initialize Course bean',\n            fields: {\n              courseId,\n              source,\n              term: this.term,\n            },\n          })\n        );\n        return [];\n      }\n    });\n\n    this.courseMap = {};\n    this.crnMap = {};\n    this.courses.forEach((course) => {\n      this.courseMap[course.id] = course;\n      course.sections.forEach((section) => {\n        this.crnMap[section.crn] = section;\n      });\n    });\n\n    this.sortingOptions = [\n      new SortingOption('Most Compact', (combination) => {\n        const { startMap, endMap } = combination;\n        const diffs = Object.keys(startMap).map((day) => {\n          const end = endMap[day];\n          const start = startMap[day];\n          if (end == null || start == null) return 0;\n          return end - start;\n        });\n        const sum = diffs.reduce((tot, min) => tot + min, 0);\n        return +sum;\n      }),\n      new SortingOption('Earliest Ending', (combination) => {\n        const { endMap } = combination;\n        const ends = Object.values(endMap);\n        const sum = ends.reduce<number>((tot, end) => tot + (end ?? 0), 0);\n        const avg = sum / ends.length;\n        return +avg;\n      }),\n      new SortingOption('Latest Beginning', (combination) => {\n        const { startMap } = combination;\n        const starts = Object.values(startMap);\n        const sum = starts.reduce<number>((tot, min) => tot + (min ?? 0), 0);\n        const avg = sum / starts.length;\n        return -avg;\n      }),\n    ];\n  }\n\n  findCourse(courseId: string): Course | undefined {\n    return this.courseMap[courseId];\n  }\n\n  findSection(crn: string): Section | undefined {\n    return this.crnMap[crn];\n  }\n\n  getCombinations(\n    desiredCourses: string[],\n    pinnedCrns: string[],\n    excludedCrns: string[]\n  ): Combination[] {\n    const crnsList: string[][] = [];\n    const dfs = (courseIndex = 0, crns: string[] = []): void => {\n      if (courseIndex === desiredCourses.length) {\n        crnsList.push(crns);\n        return;\n      }\n      const courseId = desiredCourses[courseIndex];\n      if (courseId === undefined) return;\n      const course = this.findCourse(courseId);\n      if (course === undefined) return;\n      const isIncluded = (section: Section): boolean =>\n        !excludedCrns.includes(section.crn);\n      const isPinned = (section: Section): boolean =>\n        pinnedCrns.includes(section.crn);\n      const hasConflict = (section: Section): boolean =>\n        [...pinnedCrns, ...crns].some((crn) => {\n          const crnSection = this.findSection(crn);\n          if (crnSection === undefined) return false;\n          return hasConflictBetween(crnSection, section);\n        });\n      if (course.hasLab) {\n        // If a course has a lab, then `onlyLectures`, `onlyLabs`,\n        // and `allInOnes` should be non-undefined, but we have to check\n        // anyways here to satisfy TypeScript\n        const pinnedOnlyLecture = (course.onlyLectures ?? []).find(isPinned);\n        const pinnedOnlyLab = (course.onlyLabs ?? []).find(isPinned);\n        const pinnedAllInOne = (course.allInOnes ?? []).find(isPinned);\n        if ((pinnedOnlyLecture && pinnedOnlyLab) || pinnedAllInOne) {\n          dfs(courseIndex + 1, crns);\n        } else if (pinnedOnlyLecture) {\n          pinnedOnlyLecture.associatedLabs.filter(isIncluded).forEach((lab) => {\n            if (hasConflict(lab)) return;\n            dfs(courseIndex + 1, [...crns, lab.crn]);\n          });\n        } else if (pinnedOnlyLab) {\n          pinnedOnlyLab.associatedLectures\n            .filter(isIncluded)\n            .forEach((lecture) => {\n              if (hasConflict(lecture)) return;\n              dfs(courseIndex + 1, [...crns, lecture.crn]);\n            });\n        } else {\n          (course.onlyLectures ?? []).filter(isIncluded).forEach((lecture) => {\n            if (hasConflict(lecture)) return;\n            lecture.associatedLabs.filter(isIncluded).forEach((lab) => {\n              if (hasConflict(lab)) return;\n              dfs(courseIndex + 1, [...crns, lecture.crn, lab.crn]);\n            });\n          });\n          (course.allInOnes ?? []).filter(isIncluded).forEach((section) => {\n            if (hasConflict(section)) return;\n            dfs(courseIndex + 1, [...crns, section.crn]);\n          });\n        }\n      } else if (course.sections.some(isPinned)) {\n        dfs(courseIndex + 1, crns);\n      } else {\n        // If a course does not have a lab, then `sectionGroups` should be\n        // non-undefined, but we have to check anyways here to satisfy\n        // TypeScript\n        Object.values(course.sectionGroups ?? {}).forEach((sectionGroup) => {\n          if (sectionGroup == null) return;\n          const section = sectionGroup.sections.find(isIncluded);\n          if (!section || hasConflict(section)) return;\n          dfs(courseIndex + 1, [...crns, section.crn]);\n        });\n      }\n    };\n    dfs();\n    return crnsList.map((crns) => {\n      const startMap: Record<string, number> = {};\n      const endMap: Record<string, number> = {};\n      this.iterateTimeBlocks([...pinnedCrns, ...crns], (day, period) => {\n        if (period === undefined) return;\n        const end = endMap[day];\n        const start = startMap[day];\n        if (start == null || start > period.start) startMap[day] = period.start;\n        if (end == null || end < period.end) endMap[day] = period.end;\n      });\n      return {\n        crns,\n        startMap,\n        endMap,\n      };\n    });\n  }\n\n  sortCombinations(\n    combinations: Combination[],\n    sortingOptionIndex: number\n  ): Combination[] {\n    const sortingOption = this.sortingOptions[sortingOptionIndex];\n    if (sortingOption === undefined) {\n      throw new ErrorWithFields({\n        message: `sorting option index was out of bounds`,\n        fields: {\n          sortingOptionIndex,\n          actualSortingOptionsLength: this.sortingOptions.length,\n          term: this.term,\n        },\n      });\n    }\n\n    return combinations\n      .map((combination) => ({\n        ...combination,\n        factor: sortingOption.calculateFactor(combination),\n      }))\n      .sort((a, b) => a.factor - b.factor);\n  }\n\n  iterateTimeBlocks(\n    crns: string[],\n    callback: (day: string, period: Period | undefined) => void\n  ): void {\n    crns.forEach((crn) => {\n      const section = this.findSection(crn);\n      if (section !== undefined) {\n        section.meetings.forEach(\n          (meeting) =>\n            meeting.period &&\n            meeting.days.forEach((day) => {\n              callback(day, meeting.period);\n            })\n        );\n      }\n    });\n  }\n}\n\n/**\n * Create an empty instance of the Oscar bean\n * to use as the default context value\n */\nexport const EMPTY_OSCAR = new Oscar(\n  {\n    courses: {},\n    caches: {\n      periods: [],\n      dateRanges: [],\n      scheduleTypes: [],\n      campuses: [],\n      attributes: [],\n      gradeBases: [],\n      locations: [],\n    },\n    updatedAt: new Date(),\n    version: 1,\n  },\n  '197008'\n);\n","import React from 'react';\n\nimport { Theme, defaultTermData, TermData } from '../types';\nimport Oscar, { EMPTY_OSCAR } from '../beans/Oscar';\nimport { ErrorWithFields } from '../log';\n\ntype Setter<T> = (next: T) => void;\n\nexport type ThemeContextValue = [Theme, Setter<Theme>];\nexport const ThemeContext = React.createContext<ThemeContextValue>([\n  'light',\n  (next: Theme): void => {\n    throw new ErrorWithFields({\n      message: 'empty ThemeContext.setTheme value being used',\n      fields: {\n        next,\n      },\n    });\n  },\n]);\n\nexport type TermsContextValue = string[];\nexport const TermsContext = React.createContext<TermsContextValue>([]);\n\nexport type TermContextData = {\n  term: string;\n  oscar: Oscar;\n} & TermData;\nexport type TermContextSetters = {\n  setTerm: Setter<string>;\n  patchTermData: Setter<Partial<TermData>>;\n};\nexport type TermContextValue = [TermContextData, TermContextSetters];\nexport const TermContext = React.createContext<TermContextValue>([\n  {\n    term: '',\n    oscar: EMPTY_OSCAR,\n    ...defaultTermData,\n  },\n  {\n    setTerm: (next: string): void => {\n      throw new ErrorWithFields({\n        message: 'empty TermContext.setTerm value being used',\n        fields: {\n          next,\n        },\n      });\n    },\n    patchTermData: (patch: Partial<TermData>): void => {\n      throw new ErrorWithFields({\n        message: 'empty TermContext.patchTermData value being used',\n        fields: {\n          patch,\n        },\n      });\n    },\n  },\n]);\n\nexport type OverlayCrnsContextValue = [string[], Setter<string[]>];\nexport const OverlayCrnsContext = React.createContext<OverlayCrnsContextValue>([\n  [],\n  (next: string[]): void => {\n    throw new ErrorWithFields({\n      message: 'empty OverlayCrnsContext.setOverlayCrns value being used',\n      fields: {\n        next,\n      },\n    });\n  },\n]);\n","import React, { useContext } from 'react';\nimport ReactTooltip from 'react-tooltip';\n\nimport { classes, getContentClassName, periodToString } from '../../utils';\nimport { CLOSE, OPEN, DAYS } from '../../constants';\nimport { TermContext } from '../../contexts';\nimport { Period } from '../../types';\n\nimport './stylesheet.scss';\n\nexport interface TimeBlockPosition {\n  rowIndex: number;\n  rowSize: number;\n  period: Period;\n  crn: string;\n}\n\nexport type SizeInfo = Record<string, Record<string, TimeBlockPosition>>;\n\nexport type TimeBlocksProps = {\n  className?: string;\n  crn: string;\n  overlay?: boolean;\n  capture: boolean;\n  preview: boolean;\n  isAutosized: boolean;\n  sizeInfo: SizeInfo;\n};\n\nexport function makeSizeInfoKey(period: Period): string {\n  return [period.start, period.end].join('-');\n}\n\nexport default function TimeBlocks({\n  className,\n  crn,\n  overlay = false,\n  preview,\n  capture,\n  isAutosized,\n  sizeInfo,\n}: TimeBlocksProps): React.ReactElement | null {\n  const [{ oscar, colorMap }] = useContext(TermContext);\n\n  const section = oscar.findSection(crn);\n  if (section == null) return null;\n\n  const color = colorMap[section.course.id];\n  const contentClassName = getContentClassName(color);\n\n  return (\n    <div\n      className={classes(\n        'TimeBlocks',\n        capture && 'capture',\n        overlay && 'overlay',\n        className\n      )}\n    >\n      {section.meetings.map((meeting, i) => {\n        const { period } = meeting;\n        if (period == null) return;\n\n        const sizeInfoKey = makeSizeInfoKey(period);\n        return meeting.days.map((day) => {\n          const sizeInfoDay = sizeInfo[day];\n          if (sizeInfoDay == null) return;\n          const sizeInfoPeriodDay = sizeInfoDay[sizeInfoKey];\n          if (sizeInfoPeriodDay == null) return;\n\n          return (\n            <div\n              className={classes('meeting', contentClassName, 'default', day)}\n              key={[i, day].join('-')}\n              style={{\n                top: `${((period.start - OPEN) / (CLOSE - OPEN)) * 100}%`,\n                height: `${\n                  ((period.end - period.start) / (CLOSE - OPEN)) * 100\n                }%`,\n                width: `${20 / sizeInfoPeriodDay.rowSize}%`,\n                left: `${\n                  DAYS.indexOf(day) * 20 +\n                  sizeInfoPeriodDay.rowIndex * (20 / sizeInfoPeriodDay.rowSize)\n                }%`,\n                backgroundColor: color,\n              }}\n              data-tip\n              data-for={crn}\n            >\n              {!preview && (\n                <div className=\"meeting-wrapper\">\n                  <div className=\"ids\">\n                    <span className=\"course-id\">{section.course.id}</span>\n                    <span className=\"section-id\">&nbsp;{section.id}</span>\n                  </div>\n                  <span className=\"period\">{periodToString(period)}</span>\n                  <span className=\"where\">{meeting.where}</span>\n                  <span className=\"instructors\">\n                    {meeting.instructors.join(', ')}\n                  </span>\n                </div>\n              )}\n            </div>\n          );\n        });\n      })}\n\n      {!isAutosized && (\n        <ReactTooltip\n          id={crn}\n          className=\"tooltip\"\n          type=\"dark\"\n          place=\"top\"\n          effect=\"solid\"\n        >\n          <table>\n            <tbody>\n              <tr>\n                <td>\n                  <b>Course Name</b>\n                </td>\n                <td>{section.course.title}</td>\n              </tr>\n              <tr>\n                <td>\n                  <b>Delivery Type</b>\n                </td>\n                <td>{section.deliveryMode}</td>\n              </tr>\n              <tr>\n                <td>\n                  <b>Course Number</b>\n                </td>\n                <td>{section.crn}</td>\n              </tr>\n              <tr>\n                <td>\n                  <b>Credit Hours</b>\n                </td>\n                <td>{section.credits}</td>\n              </tr>\n            </tbody>\n          </table>\n        </ReactTooltip>\n      )}\n    </div>\n  );\n}\n","import React, { useContext } from 'react';\n\nimport { CLOSE, DAYS, OPEN } from '../../constants';\nimport { classes, timeToShortString } from '../../utils';\nimport { TimeBlocks } from '..';\nimport { TermContext } from '../../contexts';\nimport { makeSizeInfoKey, TimeBlockPosition } from '../TimeBlocks';\nimport { Period } from '../../types';\n\nimport './stylesheet.scss';\n\nexport type CalendarProps = {\n  className?: string;\n  overlayCrns: string[];\n  preview?: boolean;\n  capture?: boolean;\n  isAutosized?: boolean;\n};\n\nexport default function Calendar({\n  className,\n  overlayCrns,\n  preview = false,\n  capture = false,\n  isAutosized = false,\n}: CalendarProps): React.ReactElement {\n  const [{ pinnedCrns, oscar }] = useContext(TermContext);\n\n  // Contains the rowIndex's and rowSize's passed into each crn's TimeBlocks\n  // e.g. crnSizeInfo[crn][day][\"period.start-period.end\"].rowIndex\n  const crnSizeInfo: Record<\n    string,\n    Record<string, Record<string, TimeBlockPosition>>\n  > = {};\n\n  // Recursively sets the rowSize of all time blocks within the current\n  // connected grouping of blocks to the current block's rowSize\n  const updateJoinedRowSizes = (\n    periodInfos: TimeBlockPosition[],\n    seen: Set<string>,\n    curCrn: string,\n    curPeriod: Period,\n    newRowSize: number\n  ): void => {\n    if (seen.has(curCrn)) {\n      return;\n    }\n    seen.add(curCrn);\n\n    periodInfos\n      .filter(\n        (period2Info) =>\n          period2Info.period.start < curPeriod.end &&\n          period2Info.period.end > curPeriod.start\n      )\n      .forEach((period2Info) => {\n        period2Info.rowSize = newRowSize;\n        updateJoinedRowSizes(\n          periodInfos,\n          seen,\n          period2Info.crn,\n          period2Info.period,\n          newRowSize\n        );\n      });\n  };\n\n  const crns = Array.from(new Set([...pinnedCrns, ...(overlayCrns || [])]));\n  const maxMeetingLen = (crn: string): number => {\n    const section = oscar.findSection(crn);\n    if (section == null) return 0;\n    return Math.max(\n      ...section.meetings.flatMap(({ period }) => {\n        if (period == null) return [];\n        return [period.end - period.start];\n      })\n    );\n  };\n\n  crns.sort((a, b) => maxMeetingLen(a) - maxMeetingLen(b));\n\n  // Populates crnSizeInfo by iteratively finding the next time block's\n  // rowSize and rowIndex (1 more than greatest of already processed connected\n  // blocks), updating the processed connected blocks to match its rowSize\n  crns.forEach((crn) => {\n    const section = oscar.findSection(crn);\n    if (section == null) return;\n\n    section.meetings\n      .filter((m) => m.period)\n      .forEach((meeting) => {\n        const { period } = meeting;\n        if (period == null) return;\n\n        meeting.days.forEach((day) => {\n          const dayPeriodInfos = Object.values(crnSizeInfo)\n            .flatMap<TimeBlockPosition | undefined>((days) =>\n              days != null ? Object.values(days[day] ?? {}) : []\n            )\n            .flatMap<TimeBlockPosition>((info) => (info == null ? [] : [info]));\n\n          const curRowSize = dayPeriodInfos\n            .filter(\n              (period2Info) =>\n                period2Info.period.start < period.end &&\n                period2Info.period.end > period.start\n            )\n            .reduce(\n              (acc, period2Info) => Math.max(acc, period2Info.rowSize + 1),\n              1\n            );\n\n          updateJoinedRowSizes(\n            dayPeriodInfos,\n            new Set(),\n            crn,\n            period,\n            curRowSize\n          );\n\n          const courseSizeInfo = crnSizeInfo[crn] || {};\n          crnSizeInfo[crn] = courseSizeInfo;\n\n          const daySizeInfo = courseSizeInfo[day] || {};\n          courseSizeInfo[day] = daySizeInfo;\n\n          daySizeInfo[makeSizeInfoKey(period)] = {\n            period,\n            crn,\n            rowIndex: curRowSize - 1,\n            rowSize: curRowSize,\n          };\n        });\n      });\n  });\n\n  return (\n    <div\n      className={classes(\n        'Calendar',\n        capture && 'capture',\n        preview && 'preview',\n        className\n      )}\n    >\n      {!preview && (\n        <div className=\"times\">\n          {new Array((CLOSE - OPEN) / 60).fill(0).map((_, i) => {\n            const time = OPEN + i * 60;\n            return (\n              <div className=\"time\" key={time}>\n                <span className=\"label\">{timeToShortString(time)}</span>\n              </div>\n            );\n          })}\n        </div>\n      )}\n      {!preview && (\n        <div className=\"days\">\n          {DAYS.map((day) => (\n            <div className=\"day\" key={day}>\n              <span className=\"label\">{day}</span>\n            </div>\n          ))}\n        </div>\n      )}\n      <div className=\"meetings\">\n        {pinnedCrns.map((crn) => (\n          <TimeBlocks\n            key={crn}\n            crn={crn}\n            preview={preview}\n            capture={capture}\n            isAutosized={isAutosized}\n            sizeInfo={crnSizeInfo[crn] ?? {}}\n          />\n        ))}\n        {overlayCrns &&\n          overlayCrns\n            .filter((crn) => !pinnedCrns.includes(crn))\n            .map((crn) => (\n              <TimeBlocks\n                key={crn}\n                crn={crn}\n                overlay={!preview}\n                preview={preview}\n                capture={capture}\n                isAutosized\n                sizeInfo={crnSizeInfo[crn] ?? {}}\n              />\n            ))}\n      </div>\n    </div>\n  );\n}\n","import React, { useCallback, useContext, useMemo } from 'react';\nimport { AutoSizer, List } from 'react-virtualized';\n\nimport { Button, Calendar, Select } from '..';\nimport { OverlayCrnsContext, TermContext } from '../../contexts';\nimport { Combination } from '../../types';\n\nimport 'react-virtualized/styles.css';\nimport './stylesheet.scss';\n\nexport default function CombinationContainer(): React.ReactElement {\n  const [\n    { oscar, desiredCourses, pinnedCrns, excludedCrns, sortingOptionIndex },\n    { patchTermData },\n  ] = useContext(TermContext);\n  const [, setOverlayCrns] = useContext(OverlayCrnsContext);\n\n  const handleResetPinnedCrns = useCallback(() => {\n    if (window.confirm('Are you sure to reset sections you selected?')) {\n      patchTermData({\n        pinnedCrns: [],\n      });\n    }\n  }, [patchTermData]);\n\n  const combinations = useMemo(\n    () => oscar.getCombinations(desiredCourses, pinnedCrns, excludedCrns),\n    [oscar, desiredCourses, pinnedCrns, excludedCrns]\n  );\n  const sortedCombinations = useMemo(\n    () => oscar.sortCombinations(combinations, sortingOptionIndex),\n    [oscar, combinations, sortingOptionIndex]\n  );\n\n  return (\n    <div className=\"CombinationContainer\">\n      <Select\n        onChange={(newSortingOptionIndex): void =>\n          patchTermData({ sortingOptionIndex: newSortingOptionIndex })\n        }\n        value={sortingOptionIndex}\n        options={oscar.sortingOptions.map((sortingOption, i) => ({\n          value: i,\n          label: sortingOption.label,\n        }))}\n      />\n      <Button\n        className=\"reset\"\n        onClick={handleResetPinnedCrns}\n        disabled={pinnedCrns.length === 0}\n      >\n        Reset Sections\n      </Button>\n      <div className=\"scroller\">\n        <AutoSizer>\n          {({ width, height }): React.ReactElement => (\n            <List\n              width={width}\n              height={height}\n              style={{ outline: 'none' }}\n              rowCount={sortedCombinations.length}\n              rowHeight={108}\n              rowRenderer={({ index, key, style }): React.ReactElement => {\n                const { crns } = sortedCombinations[index] as Combination;\n                return (\n                  <div className=\"list-item\" style={style} key={key}>\n                    <div\n                      className=\"combination\"\n                      onMouseEnter={(): void => setOverlayCrns(crns)}\n                      onMouseLeave={(): void => setOverlayCrns([])}\n                      onClick={(): void =>\n                        patchTermData({\n                          pinnedCrns: [...pinnedCrns, ...crns],\n                        })\n                      }\n                    >\n                      <div className=\"number\">{index + 1}</div>\n                      <Calendar\n                        className=\"calendar-preview\"\n                        overlayCrns={crns}\n                        isAutosized\n                        preview\n                      />\n                    </div>\n                  </div>\n                );\n              }}\n            />\n          )}\n        </AutoSizer>\n      </div>\n    </div>\n  );\n}\n","import React, { useCallback, useContext, useEffect, useState } from 'react';\nimport {\n  faAngleDown,\n  faAngleUp,\n  faInfoCircle,\n  faShareAlt,\n  faPalette,\n  faPlus,\n  faTrash,\n} from '@fortawesome/free-solid-svg-icons';\n\nimport { classes, getContentClassName } from '../../utils';\nimport { ActionRow, Instructor, Palette, Prerequisite } from '..';\nimport { TermContext } from '../../contexts';\nimport { Course as CourseBean, Section } from '../../beans';\nimport { CourseGpa, CrawlerPrerequisites } from '../../types';\nimport { ErrorWithFields, softError } from '../../log';\n\nimport './stylesheet.scss';\n\nexport type CourseProps = {\n  className?: string;\n  courseId: string;\n  onAddCourse?: () => void;\n};\n\nexport default function Course({\n  className,\n  courseId,\n  onAddCourse,\n}: CourseProps): React.ReactElement | null {\n  const [expanded, setExpanded] = useState<boolean>(false);\n  const [prereqOpen, setPrereqOpen] = useState<boolean>(false);\n  const [paletteShown, setPaletteShown] = useState<boolean>(false);\n  const [gpaMap, setGpaMap] = useState<CourseGpa | null>(null);\n  const isSearching = Boolean(onAddCourse);\n  const [\n    { oscar, term, desiredCourses, pinnedCrns, excludedCrns, colorMap },\n    { patchTermData },\n  ] = useContext(TermContext);\n\n  useEffect(() => {\n    if (!isSearching) {\n      const course = oscar.findCourse(courseId);\n      if (course == null) return;\n      course\n        .fetchGpa()\n        .then(setGpaMap)\n        .catch((err) => {\n          softError(\n            new ErrorWithFields({\n              message: 'error fetching course GPA',\n              source: err,\n              fields: {\n                courseId,\n                term: course.term,\n              },\n            })\n          );\n        });\n    }\n  }, [isSearching, oscar, courseId]);\n\n  const handleRemoveCourse = useCallback(\n    (course: CourseBean) => {\n      const newColorMap = { ...colorMap };\n      delete newColorMap[course.id];\n\n      patchTermData({\n        desiredCourses: desiredCourses.filter((id) => id !== course.id),\n        pinnedCrns: pinnedCrns.filter(\n          (crn) => !course.sections.some((section) => section.crn === crn)\n        ),\n        excludedCrns: excludedCrns.filter(\n          (crn) => !course.sections.some((section) => section.crn === crn)\n        ),\n        colorMap: newColorMap,\n      });\n    },\n    [desiredCourses, pinnedCrns, excludedCrns, colorMap, patchTermData]\n  );\n\n  const handleIncludeSections = useCallback(\n    (sections: Section[]) => {\n      const crns = sections.map((section) => section.crn);\n      patchTermData({\n        excludedCrns: excludedCrns.filter((crn) => !crns.includes(crn)),\n      });\n    },\n    [excludedCrns, patchTermData]\n  );\n\n  const course = oscar.findCourse(courseId);\n  if (course == null) return null;\n\n  const color = colorMap[course.id];\n  const contentClassName = color != null && getContentClassName(color);\n\n  const hasPrereqs = oscar.version > 1;\n  let prereqs: CrawlerPrerequisites | null = null;\n  if (hasPrereqs) {\n    prereqs = course.prereqs ?? [];\n  }\n\n  const instructorMap: Record<string, Section[] | undefined> = {};\n  course.sections.forEach((section) => {\n    const [primaryInstructor = 'Not Assigned'] = section.instructors;\n\n    const instructorSections = instructorMap[primaryInstructor] ?? [];\n    instructorSections.push(section);\n    instructorMap[primaryInstructor] = instructorSections;\n  });\n\n  const instructors = Object.keys(instructorMap);\n  const excludedInstructors = instructors.filter((instructor) => {\n    const sections = instructorMap[instructor];\n    if (sections == null) return false;\n    return sections.every((section) => excludedCrns.includes(section.crn));\n  });\n  const includedInstructors = instructors.filter(\n    (instructor) => !excludedInstructors.includes(instructor)\n  );\n\n  const prereqControl = (\n    nextPrereqOpen: boolean,\n    nextExpanded: boolean\n  ): void => {\n    setPrereqOpen(nextPrereqOpen);\n    setExpanded(nextExpanded);\n  };\n  const prereqAction = {\n    icon: faShareAlt,\n    styling: { transform: 'rotate(90deg)' },\n    onClick: (): void => {\n      prereqControl(true, !prereqOpen ? true : !expanded);\n    },\n  };\n\n  const infoAction = {\n    icon: faInfoCircle,\n    href:\n      `https://oscar.gatech.edu/pls/bprod/bwckctlg.p_disp_` +\n      `course_detail?cat_term_in=${term}&subj_code_in=` +\n      `${course.subject}&crse_numb_in=${course.number}`,\n  };\n\n  const pinnedSections = course.sections.filter((section) =>\n    pinnedCrns.includes(section.crn)\n  );\n  const totalCredits = pinnedSections.reduce(\n    (credits, section) => credits + section.credits,\n    0\n  );\n\n  return (\n    <div\n      className={classes('Course', contentClassName, 'default', className)}\n      style={{ backgroundColor: color }}\n      key={course.id}\n    >\n      <ActionRow\n        label={[\n          course.id,\n          pinnedSections.map((section) => section.id).join(', '),\n        ].join(' ')}\n        actions={\n          isSearching\n            ? [\n                { icon: faPlus, onClick: onAddCourse },\n                hasPrereqs ? prereqAction : infoAction,\n              ]\n            : [\n                {\n                  icon: expanded ? faAngleUp : faAngleDown,\n                  onClick: (): void => prereqControl(false, !expanded),\n                },\n                hasPrereqs ? prereqAction : infoAction,\n                {\n                  icon: faPalette,\n                  onClick: (): void => setPaletteShown(!paletteShown),\n                },\n                {\n                  icon: faTrash,\n                  onClick: (): void => handleRemoveCourse(course),\n                },\n              ]\n        }\n      >\n        <div className=\"course-row\">\n          <span className=\"course-title\">{course.title}</span>\n          <span className=\"section-crns\">\n            {pinnedSections.map((section) => section.crn).join(', ')}\n          </span>\n        </div>\n        {!isSearching && (\n          <div className=\"course-row\">\n            <span className=\"gpa\">\n              Course GPA:{' '}\n              {gpaMap === null\n                ? 'Loading...'\n                : gpaMap.averageGpa\n                ? gpaMap.averageGpa.toFixed(2)\n                : 'N/A'}\n            </span>\n            {totalCredits > 0 && (\n              <span className=\"credits\">{totalCredits} Credits</span>\n            )}\n          </div>\n        )}\n        {paletteShown && (\n          <Palette\n            className=\"palette\"\n            onSelectColor={(col): void =>\n              patchTermData({ colorMap: { ...colorMap, [courseId]: col } })\n            }\n            color={color ?? null}\n            onMouseLeave={(): void => setPaletteShown(false)}\n          />\n        )}\n      </ActionRow>\n      {expanded && !prereqOpen && (\n        <div className={classes('hover-container', 'nested')}>\n          {includedInstructors.map((name) => {\n            let instructorGpa: number | undefined = 0;\n            if (gpaMap !== null) {\n              instructorGpa = gpaMap[name];\n            }\n            return (\n              <Instructor\n                key={name}\n                color={color}\n                name={name}\n                sections={instructorMap[name] ?? []}\n                gpa={\n                  gpaMap === null\n                    ? 'Loading...'\n                    : instructorGpa\n                    ? instructorGpa.toFixed(2)\n                    : 'N/A'\n                }\n              />\n            );\n          })}\n          {excludedInstructors.length > 0 && (\n            <div className=\"excluded-instructor-container\">\n              {excludedInstructors.map((name) => (\n                <span\n                  className=\"excluded-instructor\"\n                  key={name}\n                  onClick={(): void => {\n                    const instructorSections = instructorMap[name];\n                    if (instructorSections == null) return;\n                    handleIncludeSections(instructorSections);\n                  }}\n                >\n                  {name}\n                </span>\n              ))}\n            </div>\n          )}\n        </div>\n      )}\n      {expanded && prereqOpen && prereqs !== null && (\n        <Prerequisite course={course} prereqs={prereqs} />\n      )}\n    </div>\n  );\n}\n","import React, {\n  ChangeEvent,\n  KeyboardEvent,\n  useCallback,\n  useContext,\n  useMemo,\n  useRef,\n  useState,\n} from 'react';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faPlus } from '@fortawesome/free-solid-svg-icons';\n\nimport { Course, CourseFilter } from '..';\nimport { classes, getRandomColor } from '../../utils';\nimport { ASYNC_DELIVERY_MODE, CAMPUSES, DELIVERY_MODES } from '../../constants';\nimport { TermContext } from '../../contexts';\nimport { Course as CourseBean, Section } from '../../beans';\n\nimport './stylesheet.scss';\n\nexport type CourseAddProps = {\n  className?: string;\n};\n\ntype SortKey = 'deliveryMode' | 'campus';\n\ntype SortFilter = {\n  [sortKey in SortKey]: string[];\n};\n\nfunction isSortKey(sortKey: string): sortKey is SortKey {\n  switch (sortKey) {\n    case 'deliveryMode':\n    case 'campus':\n      return true;\n    default:\n      return false;\n  }\n}\n\nfunction doesFilterMatchCourse(\n  course: CourseBean,\n  filter: SortFilter\n): boolean {\n  return Object.entries(filter).every(([key, tags]) => {\n    if (!isSortKey(key)) return true;\n\n    return (\n      tags.length === 0 ||\n      course.sections.some((section) => {\n        const sortValue = section[key];\n        if (sortValue == null) return false;\n\n        return tags.includes(sortValue);\n      })\n    );\n  });\n}\n\nfunction doesFilterMatchSection(section: Section, filter: SortFilter): boolean {\n  return Object.entries(filter).every(([key, tags]) => {\n    if (tags.length === 0) return true;\n    if (!isSortKey(key)) return true;\n\n    const sortValue = section[key];\n    if (sortValue == null) return false;\n\n    return tags.includes(sortValue);\n  });\n}\n\nexport default function CourseAdd({\n  className,\n}: CourseAddProps): React.ReactElement {\n  const [{ oscar, desiredCourses, excludedCrns, colorMap }, { patchTermData }] =\n    useContext(TermContext);\n  const [keyword, setKeyword] = useState('');\n  const [filter, setFilter] = useState<SortFilter>({\n    deliveryMode: [],\n    campus: [],\n  });\n  const [activeIndex, setActiveIndex] = useState(0);\n  const inputRef = useRef<HTMLInputElement | null>(null);\n\n  const handleChangeKeyword = useCallback(\n    (e: ChangeEvent<HTMLInputElement>) => {\n      let input = e.target.value.trim();\n      const results = /^([A-Z]+)(\\d.*)$/i.exec(input);\n      if (results != null) {\n        const [, subject, number] = results as unknown as [\n          string,\n          string,\n          string\n        ];\n        input = `${subject} ${number}`;\n      }\n      setKeyword(input);\n    },\n    []\n  );\n\n  const courses = useMemo(() => {\n    const results = /^([A-Z]+) ?((\\d.*)?)$/i.exec(keyword.toUpperCase());\n    if (!results) {\n      return [];\n    }\n    const [, subject, number] = results as unknown as [string, string, string];\n\n    setActiveIndex(0);\n\n    return oscar.courses\n      .filter((course) => {\n        const keywordMatch =\n          course.subject === subject && course.number.startsWith(number);\n        const filterMatch = doesFilterMatchCourse(course, filter);\n        return keywordMatch && filterMatch;\n      })\n      .filter((course) => !desiredCourses.includes(course.id));\n  }, [oscar, keyword, filter, desiredCourses]);\n\n  const handleAddCourse = useCallback(\n    (course: CourseBean) => {\n      if (desiredCourses.includes(course.id)) return;\n      const toBeExcludedCrns = course.sections\n        .filter((section) => {\n          const timeDecided =\n            section.deliveryMode === ASYNC_DELIVERY_MODE ||\n            (section.meetings.length &&\n              section.meetings.every(\n                (meeting) => meeting.days.length && meeting.period\n              ));\n          const filterMatch = doesFilterMatchSection(section, filter);\n          return !timeDecided || !filterMatch;\n        })\n        .map((section) => section.crn);\n      patchTermData({\n        desiredCourses: [...desiredCourses, course.id],\n        excludedCrns: [...excludedCrns, ...toBeExcludedCrns],\n        colorMap: { ...colorMap, [course.id]: getRandomColor() },\n      });\n      setKeyword('');\n      inputRef.current?.focus();\n    },\n    [filter, desiredCourses, excludedCrns, colorMap, inputRef, patchTermData]\n  );\n\n  const handleKeyDown = useCallback(\n    (e: KeyboardEvent<HTMLInputElement>) => {\n      switch (e.key) {\n        case 'Enter': {\n          const course = courses[activeIndex];\n          if (course != null) {\n            handleAddCourse(course);\n          }\n          break;\n        }\n        case 'ArrowDown':\n          setActiveIndex(Math.min(activeIndex + 1, courses.length - 1));\n          break;\n        case 'ArrowUp':\n          setActiveIndex(Math.max(activeIndex - 1, 0));\n          break;\n        default:\n          return;\n      }\n      e.preventDefault();\n    },\n    [courses, handleAddCourse, activeIndex]\n  );\n\n  const handleToggleFilter = useCallback(\n    (key: SortKey, tag: string) => {\n      const tags = filter[key];\n      setFilter({\n        ...filter,\n        [key]: tags.includes(tag)\n          ? tags.filter((v) => v !== tag)\n          : [...tags, tag],\n      });\n    },\n    [filter]\n  );\n\n  const handleResetFilter = useCallback(\n    (key) => {\n      setFilter({\n        ...filter,\n        [key]: [],\n      });\n    },\n    [filter]\n  );\n\n  const activeCourse = courses[activeIndex];\n\n  return (\n    <div className={classes('CourseAdd', className)}>\n      <div className=\"add\">\n        <div className=\"primary\">\n          <FontAwesomeIcon\n            className={classes('icon', courses.length > 0 && 'active')}\n            fixedWidth\n            icon={faPlus}\n          />\n          <div className=\"keyword-wrapper\">\n            {activeCourse && (\n              <div className={classes('keyword', 'autocomplete')}>\n                {activeCourse.id}\n              </div>\n            )}\n            <input\n              type=\"text\"\n              ref={inputRef}\n              value={keyword}\n              onChange={handleChangeKeyword}\n              className=\"keyword\"\n              placeholder=\"XX 0000\"\n              onKeyDown={handleKeyDown}\n            />\n          </div>\n        </div>\n        {[\n          ['Delivery Mode', 'deliveryMode', DELIVERY_MODES] as const,\n          ['Campus', 'campus', CAMPUSES] as const,\n        ].map(([name, property, labels]) => (\n          <CourseFilter\n            key={property}\n            name={name}\n            labels={labels}\n            selectedTags={filter[property]}\n            onReset={(): void => handleResetFilter(property)}\n            onToggle={(tag): void => handleToggleFilter(property, tag)}\n          />\n        ))}\n      </div>\n      {courses.length > 0 ? (\n        courses.map((course) => (\n          <Course\n            key={course.id}\n            className={classes(course === activeCourse && 'active')}\n            courseId={course.id}\n            onAddCourse={(): void => handleAddCourse(course)}\n          />\n        ))\n      ) : (\n        <div className=\"disclaimer\">\n          Disclaimer: GT Scheduler should be used as general reference only, and\n          users are solely responsible for ensuring any information including\n          registration restrictions.\n        </div>\n      )}\n    </div>\n  );\n}\n","import React, { useContext } from 'react';\nimport ago from 's-ago';\n\nimport { Button, Course, CourseAdd } from '..';\nimport { TermContext } from '../../contexts';\n\nimport 'react-virtualized/styles.css';\nimport './stylesheet.scss';\n\nexport default function CourseContainer(): React.ReactElement {\n  const [{ oscar, desiredCourses }] = useContext(TermContext);\n\n  return (\n    <div className=\"CourseContainer\">\n      <div className=\"scroller\">\n        <div className=\"course-list\">\n          {desiredCourses.map((courseId) => {\n            return <Course courseId={courseId} key={courseId} />;\n          })}\n        </div>\n        <CourseAdd className=\"course-add\" />\n      </div>\n      <Button\n        className=\"updated-at\"\n        href=\"https://github.com/gt-scheduler/crawler\"\n      >\n        Course data fetched {ago(oscar.updatedAt)}\n      </Button>\n    </div>\n  );\n}\n","import React, { useState } from 'react';\nimport { faAngleDown, faAngleUp } from '@fortawesome/free-solid-svg-icons';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\n\nimport { classes, humanizeArrayReact } from '../../utils';\n\nimport './stylesheet.scss';\n\nexport type CourseFilterProps = {\n  name: string;\n  labels: Record<string, string>;\n  selectedTags: string[];\n  onReset: () => void;\n  onToggle: (tag: string) => void;\n};\n\nexport default function CourseFilter({\n  name,\n  labels,\n  selectedTags,\n  onReset,\n  onToggle,\n}: CourseFilterProps): React.ReactElement {\n  const [expanded, setExpanded] = useState(false);\n\n  return (\n    <div className=\"CourseFilter\">\n      <div\n        className={classes('header', selectedTags.length > 0 && 'active')}\n        onClick={(): void => setExpanded(!expanded)}\n      >\n        {!expanded && selectedTags.length > 0 ? (\n          <div className=\"name\">\n            {humanizeArrayReact(\n              selectedTags.flatMap<string>((tag) => {\n                const selectedTag = labels[tag];\n                return selectedTag != null ? [selectedTag] : [];\n              }),\n              <span className=\"or\">or</span>\n            )}\n          </div>\n        ) : (\n          <div className=\"name\">{name}</div>\n        )}\n        <FontAwesomeIcon fixedWidth icon={expanded ? faAngleUp : faAngleDown} />\n      </div>\n      {expanded && (\n        <div className=\"tag-container\">\n          <div\n            className={classes('tag', selectedTags.length === 0 && 'active')}\n            onClick={onReset}\n          >\n            All\n          </div>\n          {Object.keys(labels).map((tag) => (\n            <div\n              key={tag}\n              className={classes('tag', selectedTags.includes(tag) && 'active')}\n              property={tag}\n              onClick={(): void => onToggle(tag)}\n            >\n              {labels[tag]}\n            </div>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n}\n","import { useCallback, useEffect, useState } from 'react';\nimport Cookies from 'js-cookie';\n\nexport default function useCookie(\n  key: string\n): [string | undefined, (next: string) => void] {\n  const [value, setValue] = useState<string | undefined>(undefined);\n\n  const setCookieValue = useCallback(\n    (val) => {\n      setValue(val);\n      Cookies.set(key, val, { expires: 1460 });\n    },\n    [key, setValue]\n  );\n\n  useEffect(() => {\n    let val;\n    if (key !== undefined && key !== '') {\n      val = Cookies.get(key);\n    }\n    setValue(val);\n  }, [key]);\n\n  return [value, setCookieValue];\n}\n\nexport function useCookieWithDefault(\n  key: string,\n  defaultValue: string\n): [string, (next: string) => void] {\n  const [value, setValue] = useState<string>(defaultValue);\n\n  const setCookieValue = useCallback(\n    (val) => {\n      setValue(val);\n      Cookies.set(key, val, { expires: 1460 });\n    },\n    [key, setValue]\n  );\n\n  useEffect(() => {\n    let val;\n    if (key !== undefined) {\n      val = Cookies.get(key);\n    }\n    setValue(val === undefined ? defaultValue : val);\n  }, [key, defaultValue]);\n\n  return [value, setCookieValue];\n}\n","import { useCallback, useMemo } from 'react';\n\nimport { useCookie } from '.';\nimport { ErrorWithFields } from '../log';\n\nexport default function useJsonCookie<T extends Record<string, unknown>>(\n  key: string,\n  defaultValue: T\n): [T, (patch: Partial<T>) => void] {\n  const [rawValue, setRawValue] = useCookie(key);\n\n  const value = useMemo(() => {\n    if (rawValue !== undefined) {\n      try {\n        const parsedValue = JSON.parse(rawValue) as T;\n        return {\n          ...defaultValue,\n          ...parsedValue,\n        };\n      } catch (err) {\n        throw new ErrorWithFields({\n          message: `failed to parse cookie data`,\n          source: err,\n          fields: {\n            rawValue,\n            key,\n            defaultValue,\n          },\n        });\n      }\n    }\n    return defaultValue;\n  }, [key, rawValue, defaultValue]);\n\n  const patchValue = useCallback(\n    (patch) => {\n      const rawVal = JSON.stringify({\n        ...value,\n        ...patch,\n      });\n      setRawValue(rawVal);\n    },\n    [value, setRawValue]\n  );\n\n  return [value, patchValue];\n}\n","import { useState, useEffect } from 'react';\n\nimport { isMobile } from '../utils';\n\n/**\n * Subscribes to resize events on the page\n *\n * ? Would this be better to subscribe to a media query ?\n */\nexport default function useMobile(): boolean {\n  const [mobile, setMobile] = useState(isMobile());\n  useEffect(() => {\n    const handleResize = (): void => {\n      const newMobile = isMobile();\n      if (mobile !== newMobile) {\n        setMobile(newMobile);\n      }\n    };\n\n    window.addEventListener('resize', handleResize);\n    return (): void => {\n      window.removeEventListener('resize', handleResize);\n    };\n  }, [mobile]);\n\n  return mobile;\n}\n","import React, { useCallback, useContext, useRef } from 'react';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport {\n  faAdjust,\n  faBars,\n  faCalendarAlt,\n  faDownload,\n  faPaste,\n} from '@fortawesome/free-solid-svg-icons';\nimport { faGithub } from '@fortawesome/free-brands-svg-icons';\nimport Cookies from 'js-cookie';\nimport ReactTooltip from 'react-tooltip';\n\nimport { getSemesterName } from '../../utils';\nimport { Button, Select, Tab } from '..';\nimport { useMobile } from '../../hooks';\nimport { ThemeContext } from '../../contexts';\n\nimport './stylesheet.scss';\n\nexport type HeaderDisplayProps = {\n  totalCredits?: number | null;\n  currentTab: number;\n  onChangeTab: (newTab: number) => void;\n  onToggleMenu: () => void;\n  tabs: string[];\n  onCopyCrns?: () => void;\n  enableCopyCrns?: boolean;\n  onExportCalendar?: () => void;\n  enableExportCalendar?: boolean;\n  onDownloadCalendar?: () => void;\n  enableDownloadCalendar?: boolean;\n  terms: string[];\n  currentTerm: string;\n  onChangeTerm: (next: string) => void;\n};\n\n/**\n * Renders the top header component as a simple display component,\n * letting any substantive state be passed in as props.\n * See `<Header>` for the full implementation that owns the header state.\n * This is safe to render without `TermContext` or `TermsContext` being present.\n */\nexport default function HeaderDisplay({\n  totalCredits = null,\n  currentTab,\n  onChangeTab,\n  onToggleMenu,\n  tabs,\n  onCopyCrns = (): void => undefined,\n  enableCopyCrns = false,\n  onExportCalendar = (): void => undefined,\n  enableExportCalendar = false,\n  onDownloadCalendar = (): void => undefined,\n  enableDownloadCalendar = false,\n  terms,\n  currentTerm,\n  onChangeTerm,\n}: HeaderDisplayProps): React.ReactElement {\n  const [theme, setTheme] = useContext(ThemeContext);\n\n  const handleThemeChange = useCallback(() => {\n    const newTheme = theme === 'light' ? 'dark' : 'light';\n    Cookies.set('theme', newTheme, { expires: 1460 });\n    setTheme(newTheme);\n  }, [theme, setTheme]);\n\n  // Obtain a ref to the copy button to only close its tooltip\n  const crnButton = useRef<HTMLDivElement>(null);\n\n  // Re-render when the page is re-sized to become mobile/desktop\n  // (desktop is >= 1024 px wide)\n  const mobile = useMobile();\n  return (\n    <div className=\"Header\">\n      {/* Menu button, only displayed on mobile */}\n      {mobile && (\n        <Button className=\"nav-menu-button\" onClick={onToggleMenu}>\n          <FontAwesomeIcon className=\"icon\" fixedWidth icon={faBars} />\n        </Button>\n      )}\n\n      {/* Left-aligned logo */}\n      <Button className=\"logo\">\n        <span className=\"gt\">GT </span>\n        <span className=\"scheduler\">Scheduler</span>\n      </Button>\n\n      {/* Term selector */}\n      <Select\n        onChange={onChangeTerm}\n        value={currentTerm}\n        options={terms.map((term) => ({\n          value: term,\n          label: getSemesterName(term),\n        }))}\n        className=\"semester\"\n      />\n\n      <span className=\"credits\">{totalCredits} Credits</span>\n\n      {/* Include middle-aligned tabs on desktop */}\n      {!mobile && (\n        <div className=\"tabs\">\n          {tabs.map((tabLabel, tabIdx) => (\n            <Tab\n              key={tabIdx}\n              active={tabIdx === currentTab}\n              onClick={(): void => onChangeTab(tabIdx)}\n              label={tabLabel}\n            />\n          ))}\n        </div>\n      )}\n\n      {/* Action bar */}\n      <div className=\"menu\">\n        <Button onClick={onDownloadCalendar} disabled={!enableDownloadCalendar}>\n          <FontAwesomeIcon className=\"icon\" fixedWidth icon={faDownload} />\n          <div className=\"text\">Download</div>\n        </Button>\n        <Button onClick={onExportCalendar} disabled={!enableExportCalendar}>\n          <FontAwesomeIcon className=\"icon\" fixedWidth icon={faCalendarAlt} />\n          <div className=\"text\">Export</div>\n        </Button>\n\n        {/* Include separate button and tooltip component\n              with manually controlled closing logic */}\n        <div\n          className=\"menu\"\n          data-tip\n          data-for=\"copy-crn\"\n          delay-hide=\"1000\"\n          ref={crnButton}\n        >\n          <Button disabled={!enableCopyCrns}>\n            <FontAwesomeIcon className=\"icon\" fixedWidth icon={faPaste} />\n            <div className=\"text\">CRNs</div>\n          </Button>\n        </div>\n        {enableCopyCrns && (\n          <ReactTooltip\n            id=\"copy-crn\"\n            type=\"dark\"\n            place=\"bottom\"\n            effect=\"solid\"\n            event=\"click\"\n            delayHide={1000}\n            afterShow={(): void => {\n              onCopyCrns();\n              setTimeout(\n                () => ReactTooltip.hide(crnButton.current ?? undefined),\n                1000\n              );\n            }}\n          >\n            Copied to clipboard!\n          </ReactTooltip>\n        )}\n\n        <Button onClick={handleThemeChange}>\n          <FontAwesomeIcon className=\"icon\" fixedWidth icon={faAdjust} />\n          <div className=\"text\">Theme</div>\n        </Button>\n        <Button href=\"https://github.com/gt-scheduler/website\">\n          <FontAwesomeIcon className=\"icon\" fixedWidth icon={faGithub} />\n          <div className=\"text\">GitHub</div>\n        </Button>\n      </div>\n    </div>\n  );\n}\n","import React, { useCallback, useContext, useMemo, useRef } from 'react';\nimport copy from 'copy-to-clipboard';\n\nimport { downloadShadowCalendar, exportCoursesToCalendar } from '../../utils';\nimport { Calendar } from '..';\nimport { TermContext, TermsContext, ThemeContext } from '../../contexts';\nimport { ErrorWithFields, softError } from '../../log';\nimport HeaderDisplay from '../HeaderDisplay';\n\nimport './stylesheet.scss';\n\nexport type HeaderProps = {\n  currentTab: number;\n  onChangeTab: (newTab: number) => void;\n  onToggleMenu: () => void;\n  tabs: string[];\n};\n\n/**\n * Renders the top header component with all state/interactivity,\n * and includes controls for top-level tab-based navigation.\n * Acts as a wrapper around `<HeaderDisplay>` that provides all props.\n */\nexport default function Header({\n  currentTab,\n  onChangeTab,\n  onToggleMenu,\n  tabs,\n}: HeaderProps): React.ReactElement {\n  const [{ term, oscar, pinnedCrns }, { setTerm }] = useContext(TermContext);\n  const terms = useContext(TermsContext);\n  const [theme] = useContext(ThemeContext);\n  const captureRef = useRef<HTMLDivElement>(null);\n\n  const totalCredits = useMemo(() => {\n    return pinnedCrns.reduce((credits, crn) => {\n      const crnSection = oscar.findSection(crn);\n      return credits + (crnSection != null ? crnSection.credits : 0);\n    }, 0);\n  }, [pinnedCrns, oscar]);\n\n  const handleExport = useCallback(() => {\n    try {\n      exportCoursesToCalendar(oscar, pinnedCrns);\n    } catch (err) {\n      softError(\n        new ErrorWithFields({\n          message: 'exporting courses to calendar failed',\n          fields: {\n            pinnedCrns,\n            term: oscar.term,\n          },\n        })\n      );\n    }\n  }, [oscar, pinnedCrns]);\n\n  const handleDownload = useCallback(() => {\n    const captureElement = captureRef.current;\n    if (captureElement == null) return;\n    try {\n      downloadShadowCalendar(captureElement, theme);\n    } catch (err) {\n      softError(\n        new ErrorWithFields({\n          message: 'downloading shadow calendar as PNG failed',\n          fields: {\n            pinnedCrns,\n            theme,\n            term: oscar.term,\n          },\n        })\n      );\n    }\n  }, [captureRef, theme, pinnedCrns, oscar.term]);\n\n  const handleCopyCrns = useCallback(() => {\n    try {\n      copy(pinnedCrns.join(', '));\n    } catch (err) {\n      softError(\n        new ErrorWithFields({\n          message: 'copying CRNs to clipboard failed',\n          fields: {\n            pinnedCrns,\n            term: oscar.term,\n          },\n        })\n      );\n    }\n  }, [pinnedCrns, oscar.term]);\n\n  return (\n    <>\n      <HeaderDisplay\n        totalCredits={totalCredits}\n        currentTab={currentTab}\n        onChangeTab={onChangeTab}\n        onToggleMenu={onToggleMenu}\n        tabs={tabs}\n        onCopyCrns={handleCopyCrns}\n        enableCopyCrns={pinnedCrns.length > 0}\n        onExportCalendar={handleExport}\n        enableExportCalendar={pinnedCrns.length > 0}\n        onDownloadCalendar={handleDownload}\n        enableDownloadCalendar={pinnedCrns.length > 0}\n        terms={terms}\n        currentTerm={term}\n        onChangeTerm={setTerm}\n      />\n\n      {/* Fake calendar used to capture screenshots */}\n      <div className=\"capture-container\" ref={captureRef}>\n        <Calendar className=\"fake-calendar\" capture overlayCrns={[]} />\n      </div>\n    </>\n  );\n}\n","import React, { useCallback, useContext, useState } from 'react';\nimport ReactTooltip from 'react-tooltip';\nimport {\n  faAngleDown,\n  faAngleUp,\n  faBan,\n  faGraduationCap,\n} from '@fortawesome/free-solid-svg-icons';\n\nimport { classes, simplifyName, unique } from '../../utils';\nimport { Section as SectionBean } from '../../beans';\nimport { ActionRow, Section } from '..';\nimport { TermContext } from '../../contexts';\n\nimport './stylesheet.scss';\n\nexport type InstructorProps = {\n  className?: string;\n  color: string | undefined;\n  name: string;\n  sections: SectionBean[];\n  gpa: string;\n};\n\nexport default function Instructor({\n  className,\n  color,\n  name,\n  sections,\n  gpa,\n}: InstructorProps): React.ReactElement {\n  const [{ pinnedCrns, excludedCrns }, { patchTermData }] =\n    useContext(TermContext);\n  const [expanded, setExpanded] = useState(true);\n\n  const includeSection = useCallback(\n    (section: SectionBean) => {\n      patchTermData({\n        excludedCrns: excludedCrns.filter((crn) => crn !== section.crn),\n      });\n    },\n    [excludedCrns, patchTermData]\n  );\n\n  const excludeSections = useCallback(\n    (sectionList: SectionBean[]) => {\n      const crns = sectionList.map((section) => section.crn);\n      patchTermData({\n        excludedCrns: unique([...excludedCrns, ...crns]),\n        pinnedCrns: pinnedCrns.filter((crn) => !crns.includes(crn)),\n      });\n    },\n    [excludedCrns, pinnedCrns, patchTermData]\n  );\n\n  const instructorPinned = sections.some((section) =>\n    pinnedCrns.includes(section.crn)\n  );\n\n  const includedSections = sections.filter(\n    (section) => !excludedCrns.includes(section.crn)\n  );\n  const excludedSections = sections.filter((section) =>\n    excludedCrns.includes(section.crn)\n  );\n\n  const excludeTooltipId = `exclude-instructor-${name.replace(' ', '-')}`;\n  return (\n    <div\n      className={classes(\n        'Instructor',\n        !expanded && 'divider-bottom',\n        className\n      )}\n    >\n      <ActionRow\n        label={name || 'Not Assigned'}\n        actions={[\n          {\n            icon: expanded ? faAngleUp : faAngleDown,\n            onClick: (): void => setExpanded(!expanded),\n          },\n          !['TBA', 'Not Assigned'].includes(name)\n            ? {\n                icon: faGraduationCap,\n                href: `http://www.ratemyprofessors.com/search.jsp?queryBy=teacherName&schoolName=Georgia+Institute+of+Technology&query=${encodeURIComponent(\n                  simplifyName(name)\n                )}`,\n              }\n            : null,\n          {\n            icon: faBan,\n            dataTip: true,\n            dataFor: excludeTooltipId,\n            onClick: (): void => excludeSections(sections),\n          },\n        ]}\n        style={instructorPinned ? { backgroundColor: color } : undefined}\n      >\n        <div className=\"instructor-row\">\n          <span className=\"gpa\">Instructor GPA: {gpa || 'N/A'}</span>\n        </div>\n      </ActionRow>\n      <ReactTooltip\n        id={excludeTooltipId}\n        type=\"dark\"\n        place=\"bottom\"\n        effect=\"solid\"\n      >\n        Exclude from Combinations\n      </ReactTooltip>\n      {expanded && (\n        <div className={classes('section-container', 'nested')}>\n          {includedSections.map((section) => {\n            const pinned = pinnedCrns.includes(section.crn);\n            return (\n              <Section\n                key={section.id}\n                className=\"divider-bottom\"\n                section={section}\n                color={color}\n                pinned={pinned}\n              />\n            );\n          })}\n          {excludedSections.length > 0 && (\n            <div className=\"excluded-section-container\">\n              {excludedSections.map((section) => (\n                <span\n                  className=\"excluded-section\"\n                  key={section.id}\n                  onClick={(): void => includeSection(section)}\n                >\n                  {section.id}\n                </span>\n              ))}\n            </div>\n          )}\n        </div>\n      )}\n    </div>\n  );\n}\n","import React, { useState } from 'react';\nimport ReactMapGL, { Marker, NavigationControl } from 'react-map-gl';\nimport { ViewState } from 'react-map-gl/src/mapbox/mapbox';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faMapPin } from '@fortawesome/free-solid-svg-icons';\n\nimport { Location } from '../../types';\n\nimport 'mapbox-gl/dist/mapbox-gl.css';\nimport './stylesheet.scss';\n\nexport type MapLocation = {\n  section: string;\n  id: string;\n  coords: Location | null;\n};\n\nexport type MapViewProps = {\n  locations: MapLocation[];\n};\n\nexport default function MapView({\n  locations,\n}: MapViewProps): React.ReactElement {\n  // These initial coordinates start the map looking at the GT Atlanta campus\n  const [viewState, setViewState] = useState<ViewState>({\n    latitude: 33.7765,\n    longitude: -84.3963,\n    zoom: 15,\n  });\n\n  const unknown: MapLocation[] = [];\n  const coordsToLocationsMap = new Map<Location, MapLocation[]>();\n  locations.forEach((location) => {\n    if (location.coords === null) {\n      unknown.push(location);\n    } else if (coordsToLocationsMap.has(location.coords)) {\n      coordsToLocationsMap.get(location.coords)?.push(location);\n    } else {\n      coordsToLocationsMap.set(location.coords, [location]);\n    }\n  });\n\n  return (\n    <div className=\"mapbox\">\n      <ReactMapGL\n        height=\"100%\"\n        width=\"100%\"\n        viewState={viewState}\n        mapStyle=\"mapbox://styles/mapbox/outdoors-v9\"\n        mapboxApiAccessToken={process.env['REACT_APP_MAPBOX_TOKEN'] ?? ''}\n        onViewStateChange={({\n          viewState: newViewState,\n        }: {\n          viewState: ViewState;\n        }): void => setViewState(newViewState)}\n      >\n        {Array.from(coordsToLocationsMap.entries()).map(\n          ([coords, coordLocations], i) => (\n            <Marker key={i} latitude={coords.lat} longitude={coords.long}>\n              <FontAwesomeIcon icon={faMapPin} className=\"pin-icon\" />\n              <div className=\"pin-text\">\n                {coordLocations.map((coordLocation) => (\n                  <div key={coordLocation.id + coordLocation.section}>\n                    {coordLocation.id} {coordLocation.section}\n                  </div>\n                ))}\n              </div>\n            </Marker>\n          )\n        )}\n        {unknown.length > 0 && (\n          <div className=\"unknown-container\">\n            <b>Undetermined</b>\n            {unknown.map((location, i) => (\n              <div className=\"class\" key={i}>\n                {location.id} {location.section}\n              </div>\n            ))}\n          </div>\n        )}\n        <div className=\"navigation\">\n          <NavigationControl showZoom showCompass />\n        </div>\n      </ReactMapGL>\n    </div>\n  );\n}\n","import React from 'react';\nimport { faAngleDown, faAngleUp } from '@fortawesome/free-solid-svg-icons';\n\nimport { ActionRow } from '..';\nimport { classes, getContentClassName } from '../../utils';\nimport { Period } from '../../types';\n\nimport './stylesheet.scss';\n\nexport type Day = 'M' | 'T' | 'W' | 'R' | 'F';\n\nexport function isDay(rawDay: string): rawDay is Day {\n  switch (rawDay) {\n    case 'M':\n    case 'T':\n    case 'W':\n    case 'R':\n    case 'F':\n      return true;\n    default:\n      return false;\n  }\n}\n\nexport interface CourseDateItem {\n  id: string;\n  title: string;\n  times: Period | undefined;\n  daysOfWeek: string[];\n}\n\nexport type DaySelectionProps = {\n  courseDateMap: Record<Day, CourseDateItem[]>;\n  activeDay: Day | '';\n  setActiveDay: (next: Day | '') => void;\n};\n\nexport default function DaySelection({\n  courseDateMap,\n  activeDay,\n  setActiveDay,\n}: DaySelectionProps): React.ReactElement {\n  const colorPalette = ['#FCB9AA', '#FFDBCC', '#ECEAE4', '#A2E1DB', '#55CBCD'];\n  const daysOfTheWeek = [\n    'Monday',\n    'Tuesday',\n    'Wednesday',\n    'Thursday',\n    'Friday',\n  ];\n\n  const formatTime = (time: number): string => {\n    if (Math.floor(time / 60) >= 12) {\n      const adjustedHour = Math.floor(time / 60) % 12;\n      const hour = adjustedHour === 0 ? '12' : adjustedHour;\n      const minute = String(time % 60).padStart(2, '0');\n      return `${hour}:${minute}pm`;\n    }\n\n    const hour = Math.floor(time / 60);\n    const minute = String(time % 60).padStart(2, '0');\n    return `${hour}:${minute}am`;\n  };\n\n  return (\n    <div className=\"date-container\">\n      {Object.keys(courseDateMap).map((date, i) => {\n        if (!isDay(date)) return null;\n        const courses = courseDateMap[date];\n        return (\n          <div\n            key={date}\n            className={classes(\n              'date',\n              getContentClassName(colorPalette[i]),\n              'default'\n            )}\n            style={{ backgroundColor: colorPalette[i] }}\n          >\n            <ActionRow\n              label={daysOfTheWeek[i] ?? ''}\n              className=\"day-select\"\n              actions={[\n                {\n                  icon: date === activeDay ? faAngleUp : faAngleDown,\n                  onClick: (): void =>\n                    date !== activeDay ? setActiveDay(date) : setActiveDay(''),\n                },\n              ]}\n            />\n            {activeDay === date && (\n              <div className=\"dropdown-content\">\n                {courses == null || courses.length === 0 ? (\n                  <div className=\"course-content\" style={{ padding: 8 }}>\n                    No classes this day!\n                  </div>\n                ) : (\n                  courses.map((course) => {\n                    let timeLabel = 'TBA';\n                    const { times } = course;\n                    if (times != null) {\n                      const { start, end } = times;\n                      timeLabel = `${formatTime(start)} - ${formatTime(end)}`;\n                    }\n\n                    return (\n                      <div className=\"course-content\" key={course.id}>\n                        <div className=\"course-id\">{course.id}</div>\n                        <span className=\"course-row\">{course.title}</span>\n                        <span className=\"course-row\">\n                          {course.daysOfWeek} {timeLabel}\n                        </span>\n                      </div>\n                    );\n                  })\n                )}\n              </div>\n            )}\n          </div>\n        );\n      })}\n    </div>\n  );\n}\n","import React, { useContext, useState } from 'react';\n\nimport MapView, { MapLocation } from '../MapView';\nimport { TermContext } from '../../contexts';\nimport DaySelection, { CourseDateItem, Day, isDay } from '../DaySelection';\nimport { Meeting } from '../../types';\n\nimport './stylesheet.scss';\n\n// Construct combined course data\n// to pass to `<MapView>` and `<DaySelection>`\ntype CombinedCourseData = CourseDateItem & MapLocation;\n\nexport default function Map(): React.ReactElement {\n  const [{ oscar, pinnedCrns }] = useContext(TermContext);\n  const [activeDay, setActiveDay] = useState<Day | ''>('M');\n  const courseDateMap: Record<Day, CombinedCourseData[]> = {\n    M: [],\n    T: [],\n    W: [],\n    R: [],\n    F: [],\n  };\n\n  // Construct the course data for the first meeting of each class\n  pinnedCrns.forEach((crn) => {\n    const section = oscar.findSection(crn);\n    if (section == null) return;\n    const { meetings } = section;\n    if (meetings.length === 0) return;\n    const firstMeeting = meetings[0] as Meeting;\n\n    firstMeeting.days.forEach((day) => {\n      if (!isDay(day)) return;\n      const courses = courseDateMap[day] ?? [];\n      courses.push({\n        id: section.course.id,\n        title: section.course.title,\n        times: firstMeeting.period,\n        daysOfWeek: firstMeeting.days,\n        section: section.id,\n        coords: firstMeeting.location,\n      });\n      courseDateMap[day] = courses;\n    });\n  });\n\n  // Sort each list of course data by their times\n  const sortedCourseDateMap: Record<Day, CombinedCourseData[]> = {\n    M: [],\n    T: [],\n    W: [],\n    R: [],\n    F: [],\n  };\n  Object.entries(courseDateMap).forEach(([day, courseDataList]) => {\n    if (!isDay(day)) return;\n    sortedCourseDateMap[day] = courseDataList.sort(\n      (a, b) => (a.times?.start ?? 0) - (b.times?.start ?? 0)\n    );\n  });\n\n  let activeLocations: MapLocation[] = [];\n  if (activeDay !== '') {\n    activeLocations = sortedCourseDateMap[activeDay];\n  }\n\n  return (\n    <div className=\"map-content\">\n      <DaySelection\n        courseDateMap={sortedCourseDateMap}\n        activeDay={activeDay}\n        setActiveDay={setActiveDay}\n      />\n      <MapView locations={activeLocations} />\n    </div>\n  );\n}\n","import React from 'react';\nimport { faTimes } from '@fortawesome/free-solid-svg-icons';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\n\nimport { classes } from '../../utils';\nimport { Button } from '..';\n\nimport './stylesheet.scss';\n\nexport type NavDrawerProps = {\n  open: boolean;\n  onClose: () => void;\n  children: React.ReactNode;\n};\n\n/**\n * Renders a nav drawer and the overlay when it is open\n */\nexport default function NavDrawer({\n  open,\n  onClose,\n  children,\n}: NavDrawerProps): React.ReactElement {\n  return (\n    <>\n      <div\n        className={classes('drawer-overlay', open && 'open')}\n        tabIndex={-1}\n        onClick={onClose}\n        role=\"presentation\"\n      />\n      <div className={classes('drawer-outer', open && 'open')}>\n        <div className=\"drawer-header\">\n          <Button className=\"drawer-close\" onClick={onClose}>\n            <FontAwesomeIcon className=\"icon\" fixedWidth icon={faTimes} />\n          </Button>\n        </div>\n        {children}\n      </div>\n    </>\n  );\n}\n","import React from 'react';\n\nimport { Button } from '..';\nimport { classes } from '../../utils';\n\nimport './stylesheet.scss';\n\nexport type NavMenuProps = {\n  items: string[];\n  currentItem: number;\n  onChangeItem: (next: number) => void;\n  className?: string;\n  style?: React.CSSProperties;\n};\n\n/**\n * Renders a vertical nav menu with a single active item\n */\nexport default function NavMenu({\n  items,\n  currentItem,\n  onChangeItem,\n  className,\n  style,\n}: NavMenuProps): React.ReactElement {\n  return (\n    <div className={classes('nav-menu', className)} style={style}>\n      {items.map((item, idx) => (\n        <Button\n          className={classes('nav-button', currentItem === idx && 'active')}\n          onClick={(): void => onChangeItem(idx)}\n          key={idx}\n        >\n          {item}\n        </Button>\n      ))}\n    </div>\n  );\n}\n","import React from 'react';\n\nimport { classes } from '../../utils';\nimport { PALETTE } from '../../constants';\n\nimport './stylesheet.scss';\n\nexport type PaletteProps = {\n  className?: string;\n  color: string | null;\n  onSelectColor: (newColor: string) => void;\n  onMouseLeave: () => void;\n};\n\nexport default function Palette({\n  className,\n  color,\n  onSelectColor,\n  onMouseLeave,\n}: PaletteProps): React.ReactElement {\n  return (\n    <div className={classes('Palette', className)} onMouseLeave={onMouseLeave}>\n      {PALETTE.map((colors, i) => (\n        <div className=\"palette-row\" key={i}>\n          {colors.map((paletteColor) => (\n            <div\n              className={classes('color', paletteColor === color && 'frame')}\n              key={paletteColor}\n              style={{ backgroundColor: paletteColor }}\n              onClick={(): void => onSelectColor(paletteColor)}\n            />\n          ))}\n        </div>\n      ))}\n    </div>\n  );\n}\n","import React, { useContext, useState } from 'react';\nimport {\n  faInfoCircle,\n  faAngleUp,\n  faAngleDown,\n} from '@fortawesome/free-solid-svg-icons';\n\nimport { TermContext } from '../../contexts';\nimport { classes, serializePrereqs } from '../../utils';\nimport { ActionRow } from '..';\nimport { Course } from '../../beans';\nimport {\n  CrawlerPrerequisites,\n  PrerequisiteClause,\n  PrerequisiteOperator,\n} from '../../types';\nimport { ErrorWithFields, softError } from '../../log';\n\nconst BASE_ITEM_STYLE = { fontSize: '0.9em', padding: '8px' };\n\nexport type PrerequisiteProps = {\n  course: Course;\n  prereqs: CrawlerPrerequisites;\n};\n\n/**\n * Renders the prereqs for a single course, given that the crawler version\n * supports prereqs. (Make sure to check this before). An empty prereq list is\n * an authoritative statement that the course has no prereqs, and as such a\n * message will be displayed telling the user. Otherwise, this component tries\n * to render the prereq tree in a way that is easily consumable without taking\n * up too much screen space, first trying to split the prereqs up into separate\n * \"options\" (sub-clauses of an OR set) if possible before rendering a list of\n * items with operators in between. Finally, in each item, there is the\n * flattened textual representation of the remainder of the subtree, which\n * restores parentheses groupings (much like the original Oscar prereq syntax)\n */\nexport default function Prerequisite({\n  course,\n  prereqs,\n}: PrerequisiteProps): React.ReactElement {\n  let content: React.ReactNode;\n  if (prereqs.length === 0) {\n    content = <PrerequisiteEmpty />;\n  } else {\n    // `prereqs` isn't an empty array, so it must be `PrerequisiteSet`\n    // (here we manually `Exclude` the empty array case)\n    const [op, ...subClauses] = prereqs as Exclude<CrawlerPrerequisites, []>;\n\n    switch (op) {\n      case 'and':\n        // We only consider this a single \"option\",\n        // so just render the content as a direct child\n        content = <PrerequisiteClauseDisplay clause={['and', ...subClauses]} />;\n        break;\n      case 'or':\n        if (subClauses.length === 1) {\n          // There is only 1 option:\n          // just render the content as a direct child\n          content = (\n            <PrerequisiteClauseDisplay\n              clause={subClauses[0] as PrerequisiteClause}\n            />\n          );\n        } else {\n          // Render an option for each sub-clause\n          content = (\n            <>\n              {subClauses.map((subClause, i) => (\n                <PrerequisiteOption key={i} clause={subClause} index={i} />\n              ))}\n            </>\n          );\n        }\n        break;\n      default:\n        softError(\n          new ErrorWithFields({\n            message: 'invalid operator found in top-level prereqs',\n            fields: {\n              courseId: course.id,\n              operator: op,\n              term: course.term,\n            },\n          })\n        );\n        content = null;\n    }\n  }\n\n  return (\n    <div className={classes('hover-container', 'nested')}>\n      <PrerequisiteHeader course={course} />\n      <div className={classes('nested')}>{content}</div>\n    </div>\n  );\n}\n\n// Private sub-components\n\ntype PrerequisiteHeaderProps = {\n  course: Course;\n};\n\n/**\n * Renders the \"header\" at the top of a prereq display,\n * which includes a link to Oscar giving the original prereq source,\n * plus other course information.\n */\nfunction PrerequisiteHeader({\n  course,\n}: PrerequisiteHeaderProps): React.ReactElement {\n  const [{ term }] = useContext(TermContext);\n\n  return (\n    <ActionRow\n      className={classes('hover-container')}\n      label=\"Prerequisites\"\n      actions={[\n        {\n          icon: faInfoCircle,\n          href:\n            `https://oscar.gatech.edu/pls/bprod/bwckctlg.p_disp_` +\n            `course_detail?cat_term_in=${term}&subj_code_in=` +\n            `${course.subject}&crse_numb_in=${course.number}`,\n        },\n      ]}\n    />\n  );\n}\n\ntype PrerequisiteOptionProps = {\n  clause: PrerequisiteClause;\n  index: number;\n};\n\n/**\n * Renders a single prereq option -- a sub-clause of a larger \"OR\" prereq set\n * that is independently collapse-able from the other sibling options.\n * Inside, uses `PrerequisiteClauseDisplay` to render the sub-clause if\n * the option is expanded.\n */\nfunction PrerequisiteOption({\n  clause,\n  index,\n}: PrerequisiteOptionProps): React.ReactElement {\n  const [expanded, setExpanded] = useState(true);\n\n  return (\n    <>\n      <ActionRow\n        className={classes('hover-container')}\n        label={`Option ${index + 1}`}\n        actions={[\n          {\n            icon: expanded ? faAngleUp : faAngleDown,\n            onClick: (): void => setExpanded(!expanded),\n          },\n        ]}\n      />\n      {expanded && (\n        <div className={classes('nested')}>\n          <PrerequisiteClauseDisplay clause={clause} />\n        </div>\n      )}\n    </>\n  );\n}\n\ntype PrerequisiteClauseDisplayProps = {\n  clause: PrerequisiteClause;\n};\n\n/**\n * Renders an arbitrary prereq clause. If the clause is a singular course,\n * then it renders a single Item. Otherwise, if the clause is a set,\n * this component renders an item for each member of the set, and includes\n * an operator at the end of each item's text to indicate that each item\n * is part of a larger prereq set.\n */\nfunction PrerequisiteClauseDisplay({\n  clause,\n}: PrerequisiteClauseDisplayProps): React.ReactElement {\n  if (!Array.isArray(clause)) {\n    // Render the single prereq course\n    return <PrerequisiteItem clause={clause} operator=\"and\" isLast />;\n  }\n\n  // Render a list of prereq items\n  const [operator, ...subClauses] = clause;\n  return (\n    <>\n      {subClauses.map((subClause, i) => (\n        <PrerequisiteItem\n          key={i}\n          clause={subClause}\n          operator={operator}\n          isLast={i === subClauses.length - 1}\n        />\n      ))}\n    </>\n  );\n}\n\ntype PrerequisiteItemProps = {\n  clause: PrerequisiteClause;\n  operator: PrerequisiteOperator;\n  isLast: boolean;\n};\n\n/**\n * Renders a single \"item\" -- a div with the completely flattened text\n * representation of the prereq subtree passed in as `clause` (whether\n * that's a single prereq course or a sprawling sub-tree with many branches).\n * Includes the ability to display a higher-level operator between different\n * `PrerequisiteItem`'s as long as `isLast` is false, which is used by\n * `PrerequisiteClauseDisplay` when it needs to render a prerequisite set.\n `\n */\nfunction PrerequisiteItem({\n  clause,\n  operator,\n  isLast,\n}: PrerequisiteItemProps): React.ReactElement {\n  return (\n    <div className={classes('divider-bottom')} style={BASE_ITEM_STYLE}>\n      {serializePrereqs(clause)} {!isLast && <strong>{operator}</strong>}\n    </div>\n  );\n}\n\n/**\n * Replacement prerequisite \"item\"-like component that simply contains\n * a notification to the user that the course has no prereqs.\n */\nfunction PrerequisiteEmpty(): React.ReactElement {\n  return (\n    <div style={BASE_ITEM_STYLE}>No prerequisites. You&apos;re good to go!</div>\n  );\n}\n","import React, { useMemo, useState } from 'react';\n\nimport { classes } from '../../utils';\nimport { Button, Calendar, CombinationContainer, CourseContainer } from '..';\nimport { OverlayCrnsContext, OverlayCrnsContextValue } from '../../contexts';\nimport { useMobile } from '../../hooks';\n\n/**\n * Wraps around the root top-level component of the Scheduler tab\n */\nexport default function Scheduler(): React.ReactElement {\n  const mobile = useMobile();\n\n  // Store the current set of CRNs that are shown on the Calendar overlay\n  const [overlayCrns, setOverlayCrns] = useState<string[]>([]);\n\n  // Control second-level navigation between panes on mobile\n  const [tabIndex, setTabIndex] = useState<number>(0);\n\n  // Memoize the CRN overlay set's context value so it is stable\n  const overlayContextValue = useMemo<OverlayCrnsContextValue>(\n    () => [overlayCrns, setOverlayCrns],\n    [overlayCrns, setOverlayCrns]\n  );\n\n  return (\n    <>\n      {mobile && (\n        <div className=\"tab-container\">\n          {['Courses', 'Combinations', 'Calendar'].map((tabTitle, i) => (\n            <Button\n              key={tabTitle}\n              className={classes('tab', tabIndex === i && 'active')}\n              onClick={(): void => setTabIndex(i)}\n            >\n              {tabTitle}\n            </Button>\n          ))}\n        </div>\n      )}\n      <OverlayCrnsContext.Provider value={overlayContextValue}>\n        <div className=\"main\">\n          {(!mobile || tabIndex === 0) && <CourseContainer />}\n          {(!mobile || tabIndex === 1) && <CombinationContainer />}\n          {(!mobile || tabIndex === 2) && (\n            <div className=\"calendar-container\">\n              <Calendar className=\"calendar\" overlayCrns={overlayCrns} />\n            </div>\n          )}\n        </div>\n      </OverlayCrnsContext.Provider>\n    </>\n  );\n}\n","import React, { useCallback, useContext, useState } from 'react';\nimport ReactTooltip from 'react-tooltip';\nimport {\n  faBan,\n  faChair,\n  faThumbtack,\n  faTimes,\n} from '@fortawesome/free-solid-svg-icons';\n\nimport { classes, periodToString } from '../../utils';\nimport { ActionRow } from '..';\nimport { OverlayCrnsContext, TermContext } from '../../contexts';\nimport { DELIVERY_MODES } from '../../constants';\nimport { Section as SectionBean } from '../../beans';\nimport { Seating } from '../../beans/Section';\nimport { ErrorWithFields, softError } from '../../log';\n\nimport './stylesheet.scss';\n\nexport type SectionProps = {\n  className?: string;\n  section: SectionBean;\n  pinned: boolean;\n  color: string | undefined;\n};\n\nexport default function Section({\n  className,\n  section,\n  pinned,\n  color,\n}: SectionProps): React.ReactElement {\n  const [{ term, pinnedCrns, excludedCrns }, { patchTermData }] =\n    useContext(TermContext);\n  const [, setOverlayCrns] = useContext(OverlayCrnsContext);\n  const [seating, setSeating] = useState<Seating>([[], 0]);\n\n  let hovering = false;\n  const handleHover = (): void => {\n    hovering = true;\n    setTimeout(() => {\n      if (hovering) {\n        section\n          .fetchSeating(term)\n          .then((newSeating) => {\n            setSeating(newSeating);\n          })\n          .catch((err) =>\n            softError(\n              new ErrorWithFields({\n                message: 'error while fetching seating',\n                source: err,\n                fields: { crn: section.crn, term: section.term },\n              })\n            )\n          );\n      }\n    }, 333);\n  };\n\n  const excludeSection = useCallback(\n    (sect: SectionBean) => {\n      patchTermData({\n        excludedCrns: [...excludedCrns, sect.crn],\n        pinnedCrns: pinnedCrns.filter((crn) => crn !== sect.crn),\n      });\n    },\n    [pinnedCrns, excludedCrns, patchTermData]\n  );\n\n  const pinSection = useCallback(\n    (sect: SectionBean) => {\n      if (pinnedCrns.includes(sect.crn)) {\n        patchTermData({\n          pinnedCrns: pinnedCrns.filter((crn) => crn !== sect.crn),\n        });\n      } else {\n        patchTermData({\n          pinnedCrns: [...pinnedCrns, sect.crn],\n          excludedCrns: excludedCrns.filter((crn) => crn !== sect.crn),\n        });\n      }\n    },\n    [pinnedCrns, excludedCrns, patchTermData]\n  );\n\n  const excludeTooltipId = `section-exclude-${section.id}`;\n  return (\n    <ActionRow\n      label={section.id}\n      className={classes('Section', className)}\n      onMouseEnter={(): void => setOverlayCrns([section.crn])}\n      onMouseLeave={(): void => setOverlayCrns([])}\n      actions={[\n        {\n          icon: pinned ? faTimes : faThumbtack,\n          onClick: (): void => pinSection(section),\n        },\n        {\n          icon: faChair,\n          dataTip: true,\n          dataFor: section.id,\n          href: `https://oscar.gatech.edu/pls/bprod/bwckschd.p_disp_detail_sched?term_in=${term}&crn_in=${section.crn}`,\n        },\n        {\n          icon: faBan,\n          dataTip: true,\n          dataFor: excludeTooltipId,\n          onClick: (): void => excludeSection(section),\n        },\n      ]}\n      style={pinned ? { backgroundColor: color } : undefined}\n    >\n      <ReactTooltip\n        id={excludeTooltipId}\n        className=\"tooltip\"\n        type=\"dark\"\n        place=\"right\"\n        effect=\"solid\"\n      >\n        Exclude from Combinations\n      </ReactTooltip>\n      <div className=\"section-details\">\n        <div className=\"delivery-mode\">\n          {section.deliveryMode != null\n            ? DELIVERY_MODES[section.deliveryMode]\n            : ''}\n        </div>\n        <div className=\"meeting-container\">\n          {section.meetings.map((meeting, i) => {\n            return (\n              <div className=\"meeting\" key={i}>\n                <span className=\"days\">{meeting.days.join('')}</span>\n                <span className=\"period\">{periodToString(meeting.period)}</span>\n              </div>\n            );\n          })}\n        </div>\n\n        <ReactTooltip\n          id={section.id}\n          className=\"tooltip\"\n          type=\"dark\"\n          place=\"right\"\n          effect=\"solid\"\n          afterShow={(): void => handleHover()}\n          afterHide={(): void => {\n            hovering = false;\n          }}\n        >\n          <table>\n            <tbody>\n              <tr>\n                <td>\n                  <b>Seats Filled</b>\n                </td>\n                <td>\n                  {seating[0].length === 0\n                    ? `Loading...`\n                    : typeof seating[0][1] === 'number'\n                    ? `${seating[0][1] ?? '<unknown>'} of ${\n                        seating[0][0] ?? '<unknown>'\n                      }`\n                    : `N/A`}\n                </td>\n              </tr>\n              <tr>\n                <td>\n                  <b>Waitlist Filled</b>\n                </td>\n                <td>\n                  {seating[0].length === 0\n                    ? `Loading...`\n                    : typeof seating[0][1] === 'number'\n                    ? `${seating[0][3] ?? '<unknown>'} of ${\n                        seating[0][2] ?? '<unknown>'\n                      }`\n                    : `N/A`}\n                </td>\n              </tr>\n            </tbody>\n          </table>\n        </ReactTooltip>\n      </div>\n    </ActionRow>\n  );\n}\n","import React, { useState } from 'react';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faCaretDown } from '@fortawesome/free-solid-svg-icons';\n\nimport { classes } from '../../utils';\nimport { Button } from '..';\n\nimport './stylesheet.scss';\n\nexport type SelectProps<V extends string | number> = {\n  className?: string;\n  value: V;\n  onChange: (newValue: V) => void;\n  options: SelectOption<V>[];\n};\n\nexport type SelectOption<V> = {\n  value: V;\n  label: React.ReactNode;\n};\n\nexport default function Select<V extends string | number>({\n  className,\n  value,\n  onChange,\n  options,\n}: SelectProps<V>): React.ReactElement {\n  const [opened, setOpened] = useState(false);\n\n  const selectedOption = options.find((option) => option.value === value);\n  const label = selectedOption ? selectedOption.label : '-';\n\n  return (\n    <div\n      className={classes('Button', 'Select', className)}\n      onClick={(): void => setOpened(!opened)}\n    >\n      <div className=\"text\">{label}</div>\n      <FontAwesomeIcon fixedWidth icon={faCaretDown} />\n      {opened && (\n        <div className=\"intercept\" onClick={(): void => setOpened(false)} />\n      )}\n      {opened && (\n        <div className=\"option-container\">\n          {options.map(({ value: optionValue, label: optionLabel }) => (\n            <Button\n              className=\"option\"\n              key={optionValue}\n              onClick={(): void => onChange(optionValue)}\n            >\n              {optionLabel}\n            </Button>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n}\n","import React from 'react';\n\nimport { classes } from '../../utils';\n\nimport './stylesheet.scss';\n\nexport type TabProps = {\n  label: string;\n  onClick: () => void;\n  active?: boolean;\n  className?: string;\n  style?: React.CSSProperties;\n};\n\n/**\n * Renders a single top-level tab that is used in a horizontal list\n */\nexport default function Tab({\n  label,\n  active = false,\n  onClick,\n  className,\n  style,\n}: TabProps): React.ReactElement {\n  return (\n    <button\n      className={classes('Tab', active && 'active', className)}\n      style={style}\n      onClick={onClick}\n      type=\"button\"\n    >\n      {label}\n    </button>\n  );\n}\n","import React from 'react';\n\nimport { classes } from '../../utils';\nimport { useMobile } from '../../hooks';\n\nimport './stylesheet.scss';\n\nexport default function Attribution(): React.ReactElement {\n  const mobile = useMobile();\n  return (\n    <div className={classes('Attribution')}>\n      <p>\n        Copyright (c) 2021 with{' '}\n        <span role=\"img\" aria-label=\"love\">\n          ❤️\n        </span>{' '}\n        by <a href=\"https://jasonpark.me\">Jinseo Park</a>,{' '}\n        <a href=\"https://bitsofgood.org\">Bits of Good</a>, and{' '}\n        <a href=\"https://github.com/gt-scheduler/website/graphs/contributors\">\n          {mobile ? 'others' : 'the GT Scheduler contributors'}\n        </a>\n        .\n      </p>\n    </div>\n  );\n}\n","import React, { useState } from 'react';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faCommentAlt, faTimes } from '@fortawesome/free-solid-svg-icons';\n\nimport { Button } from '..';\nimport { classes } from '../../utils';\nimport { FormSubmit } from '../../beans';\n\nimport './stylesheet.scss';\n\nexport default function Feedback(): React.ReactElement {\n  const [expanded, setExpanded] = useState<boolean>(false);\n  const [submit, setSubmit] = useState<boolean>(false);\n  const [rating, setRating] = useState<number | null>(null);\n  const [feedback, setFeedback] = useState<string>('');\n  const [loading, setLoading] = useState<boolean>(false);\n\n  const onSubmit = (): void => {\n    setLoading(true);\n    // Add 1 to the rating to move it from [0,4] to [1,5]\n    FormSubmit({ rating: (rating ?? 0) + 1, feedback })\n      .then(() => {\n        setSubmit(true);\n        setLoading(false);\n      })\n      .catch(() => {\n        setSubmit(true);\n        setLoading(false);\n      });\n  };\n\n  return (\n    <div>\n      {!expanded && (\n        <div className=\"FeedbackButtonWrapper\">\n          <Button\n            className=\"FeedbackButton\"\n            onClick={(): void => setExpanded(true)}\n          >\n            <FontAwesomeIcon icon={faCommentAlt} size=\"2x\" />\n          </Button>\n        </div>\n      )}\n      {expanded && (\n        <div>\n          <form className=\"FeedbackForm\">\n            <div className=\"container\">\n              <FontAwesomeIcon\n                icon={faTimes}\n                className=\"CloseIcon\"\n                onClick={(): void => setExpanded(false)}\n              />\n              <h3 className=\"FeedbackTitle\">Feedback</h3>\n              {!submit && (\n                <div>\n                  <p className=\"text\">How would you rate your experience?</p>\n                  <div className=\"FormButtons\">\n                    {[1, 2, 3, 4, 5].map((i) => (\n                      <Button\n                        key={i}\n                        className={classes(\n                          'FormButton',\n                          rating === i - 1 && 'active'\n                        )}\n                        onClick={(): void => setRating(i - 1)}\n                      >\n                        {i}\n                      </Button>\n                    ))}\n                  </div>\n                  <div className=\"ScoreLabels\">\n                    <span className=\"score\" style={{ marginLeft: '4px' }}>\n                      Poor\n                    </span>\n                    <span className=\"score\" style={{ marginRight: '4px' }}>\n                      Great\n                    </span>\n                  </div>\n                  <textarea\n                    className=\"FeedbackTextArea\"\n                    placeholder=\"Please let us know if you have any more feedback!\"\n                    onChange={(event): void => setFeedback(event.target.value)}\n                    value={feedback}\n                  />\n                  <Button\n                    className=\"SubmitButton\"\n                    onClick={onSubmit}\n                    disabled={rating == null || loading}\n                  >\n                    Submit\n                  </Button>\n                </div>\n              )}\n              {submit && (\n                <div className=\"submitted\">\n                  <p className=\"submitted-thanks text\">\n                    <span>Thank you for your feedback!</span>\n                  </p>\n                  <div>\n                    <Button\n                      className=\"SubmitButton\"\n                      onClick={(): void => setExpanded(false)}\n                    >\n                      Close\n                    </Button>\n                  </div>\n                </div>\n              )}\n            </div>\n          </form>\n        </div>\n      )}\n    </div>\n  );\n}\n","import React, { useEffect } from 'react';\nimport Cookies from 'js-cookie';\nimport swal from '@sweetalert/with-react';\n\nimport { softError, ErrorWithFields } from '../../log';\n\n// Key to mark when a user has already been shown the information modal.\n// Update this when updating the contents of the modal.\n// In the future, prefix all keys with `YYYY-MM-DD-`\n// to ensure that they remain globally unique.\nconst MODAL_COOKIE_KEY = 'visited-merge-notice';\n\n/**\n * Inner content of the information modal.\n * Change this to update the announcement that is shown when visiting the site.\n * Additionally, make sure to change `MODAL_COOKIE_KEY` with another unique\n * value that has never been used before.\n */\nexport function InformationModalContent(): React.ReactElement {\n  return (\n    <div>\n      <img\n        style={{ width: '175px' }}\n        alt=\"GT Scheduler Logo\"\n        src=\"/mascot.png\"\n      />\n      <h1>GT Scheduler</h1>\n      <p>\n        Hey there, yellow jackets!{' '}\n        <a href=\"https://github.com/gt-scheduler\">GT Scheduler</a> is a new\n        collaboration between <a href=\"https://bitsofgood.org/\">Bits of Good</a>{' '}\n        and <a href=\"https://jasonpark.me/\">Jason (Jinseo) Park</a> aimed at\n        making class registration easier for everybody! Now, you can access\n        course prerequisites, instructor GPAs, live seating information, and\n        more all in one location.\n      </p>\n      <p>\n        If you enjoy our work and are interested in contributing, feel free to{' '}\n        <a href=\"https://github.com/gt-scheduler/website/pulls\">\n          open a pull request\n        </a>{' '}\n        with your improvements. Thank you and enjoy!\n      </p>\n    </div>\n  );\n}\n\n/**\n * Hook to show the information modal upon the user's first visit to the site\n * when they haven't seen this version of the information modal before.\n */\nexport function useInformationModal(): void {\n  useEffect(() => {\n    if (!Cookies.get(MODAL_COOKIE_KEY)) {\n      swal({\n        button: 'Got It!',\n        content: <InformationModalContent />,\n      }).catch((err) => {\n        softError(\n          new ErrorWithFields({\n            message: 'error with swal call',\n            source: err,\n            fields: {\n              cookieKey: MODAL_COOKIE_KEY,\n            },\n          })\n        );\n      });\n\n      Cookies.set(MODAL_COOKIE_KEY, 'true', { expires: 365 });\n    }\n  }, []);\n}\n","import React, { useCallback, useEffect, useMemo, useState } from 'react';\nimport axios from 'axios';\nimport * as Sentry from '@sentry/react';\n\nimport { classes, isAxiosNetworkError } from '../../utils';\nimport { Header, Scheduler, Map, NavDrawer, NavMenu, Attribution } from '..';\nimport Feedback from '../Feedback';\nimport { Oscar } from '../../beans';\nimport {\n  useCookieWithDefault,\n  useJsonCookie,\n  useMobile,\n  useBodyClass,\n} from '../../hooks';\nimport {\n  TermContext,\n  TermContextValue,\n  TermsContext,\n  ThemeContext,\n  ThemeContextValue,\n} from '../../contexts';\nimport { defaultTermData, isTheme } from '../../types';\nimport { ErrorWithFields, softError } from '../../log';\nimport { useInformationModal } from '../InformationModal';\n\nimport 'react-virtualized/styles.css';\nimport './stylesheet.scss';\n\nconst NAV_TABS = ['Scheduler', 'Map'];\n\n/**\n * Determines if the given term is considered \"valid\";\n * helps to recover from invalid cookie values if possible.\n */\nfunction isValidTerm(term: unknown): boolean {\n  return (\n    term != null &&\n    typeof term === 'string' &&\n    term !== '' &&\n    term !== 'undefined'\n  );\n}\n\nexport default function App(): React.ReactElement {\n  // Display a popup when first visiting the site\n  useInformationModal();\n\n  const [terms, setTerms] = useState<string[]>([]);\n  const [oscar, setOscar] = useState<Oscar | null>(null);\n\n  // Persist the term and term data as cookies\n  const [term, setTerm] = useCookieWithDefault('term', '');\n  const [termData, patchTermData] = useJsonCookie(term, defaultTermData);\n\n  // Only consider courses and CRNs that exist\n  // (fixes issues where a CRN/course is removed from Oscar\n  // after a schedule was made with them)\n  const filteredTermData = useMemo(() => {\n    const courseFilter = (courseId: string): boolean =>\n      oscar != null && oscar.findCourse(courseId) != null;\n    const crnFilter = (crn: string): boolean =>\n      oscar != null && oscar.findSection(crn) != null;\n\n    const desiredCourses = termData.desiredCourses.filter(courseFilter);\n    const pinnedCrns = termData.pinnedCrns.filter(crnFilter);\n    const excludedCrns = termData.excludedCrns.filter(crnFilter);\n\n    return { ...termData, desiredCourses, pinnedCrns, excludedCrns };\n  }, [oscar, termData]);\n\n  // Memoize context values so that their references are stable\n  const termContextValue = useMemo<TermContextValue>(\n    () => [\n      // We ensure that oscar is non-null when we give this to the context\n      // provider, so while this is an unsafe cast we ensure the safety\n      // manually.\n      { term, oscar: oscar as Oscar, ...filteredTermData },\n      { setTerm, patchTermData },\n    ],\n    [term, oscar, filteredTermData, setTerm, patchTermData]\n  );\n\n  // Fetch the current term's scraper information\n  useEffect(() => {\n    setOscar(null);\n    if (isValidTerm(term)) {\n      const url = `https://gt-scheduler.github.io/crawler/${term}.json`;\n      axios\n        .get(url)\n        .then((res) => {\n          const newOscar = new Oscar(res.data, term);\n          setOscar(newOscar);\n        })\n        .catch((err) => {\n          // TODO(jazevedo620) 09-05-2021: present this as a hard error to user\n          // Ignore network errors\n          if (!isAxiosNetworkError(err)) {\n            softError(\n              new ErrorWithFields({\n                message: 'error fetching crawler data',\n                source: err,\n                fields: {\n                  term,\n                  url,\n                },\n              })\n            );\n          }\n        });\n    }\n  }, [term]);\n\n  // Fetch all terms via the GitHub API\n  useEffect(() => {\n    const url =\n      'https://api.github.com/repos/gt-scheduler/crawler/contents?ref=gh-pages';\n    axios\n      .get(url)\n      .then((res) => {\n        const newTerms = (res.data as { name: string }[])\n          .map((content) => content.name)\n          .filter((name) => /\\d{6}\\.json/.test(name))\n          .map((name) => name.replace(/\\.json$/, ''))\n          .sort()\n          .reverse();\n        setTerms(newTerms);\n      })\n      .catch((err) => {\n        // TODO(jazevedo620) 09-05-2021: present this as a hard error to user\n        // Ignore network errors\n        if (!isAxiosNetworkError(err)) {\n          softError(\n            new ErrorWithFields({\n              message: 'error fetching list of terms',\n              source: err,\n              fields: {\n                url,\n              },\n            })\n          );\n        }\n      });\n  }, [setTerms]);\n\n  // Set the term to be the first one if it is unset\n  // (once the terms load)\n  useEffect(() => {\n    if (terms.length > 0 && !isValidTerm(term)) {\n      const [recentTerm] = terms as [string];\n      if (isValidTerm(recentTerm)) {\n        setTerm(recentTerm);\n      } else {\n        // TODO(jazevedo620) 08-30-2021: present this as a hard error to user\n        softError(\n          new ErrorWithFields({\n            message: 'most recent term is not valid; can not fallback',\n            fields: {\n              recentTerm,\n              terms,\n            },\n          })\n        );\n      }\n    }\n  }, [terms, term, setTerm]);\n\n  // Re-render when the page is re-sized to become mobile/desktop\n  // (desktop is >= 1024 px wide)\n  const mobile = useMobile();\n\n  // Allow top-level tab-based navigation\n  const [currentTabIndex, setTabIndex] = useState(0);\n\n  // Handle the status of the drawer being open on mobile\n  const [isDrawerOpen, setIsDrawerOpen] = useState(false);\n  const openDrawer = useCallback(() => setIsDrawerOpen(true), []);\n  const closeDrawer = useCallback(() => setIsDrawerOpen(false), []);\n  useEffect(() => {\n    // Close the drawer if switching to desktop\n    if (isDrawerOpen && !mobile) {\n      setIsDrawerOpen(false);\n    }\n  }, [isDrawerOpen, mobile]);\n\n  // If the scraped JSON hasn't been loaded,\n  // then show an empty div as a loading intermediate\n  if (!oscar) {\n    return (\n      <ThemeLoader>\n        <AppCSSRoot />\n      </ThemeLoader>\n    );\n  }\n\n  return (\n    <ThemeLoader>\n      <AppCSSRoot>\n        <TermsContext.Provider value={terms}>\n          <TermContext.Provider value={termContextValue}>\n            <Sentry.ErrorBoundary fallback={<div>An error has occurred</div>}>\n              {/* On mobile, show the nav drawer + overlay */}\n              {mobile && (\n                <NavDrawer open={isDrawerOpen} onClose={closeDrawer}>\n                  <NavMenu\n                    items={NAV_TABS}\n                    currentItem={currentTabIndex}\n                    onChangeItem={setTabIndex}\n                  />\n                </NavDrawer>\n              )}\n              {/* The header controls top-level navigation\n                  and is always present */}\n              <Header\n                currentTab={currentTabIndex}\n                onChangeTab={setTabIndex}\n                onToggleMenu={openDrawer}\n                tabs={NAV_TABS}\n              />\n              {currentTabIndex === 0 && <Scheduler />}\n              {currentTabIndex === 1 && <Map />}\n              <Feedback />\n            </Sentry.ErrorBoundary>\n            <Attribution />\n          </TermContext.Provider>\n        </TermsContext.Provider>\n      </AppCSSRoot>\n    </ThemeLoader>\n  );\n}\n// Private sub-components\n\ntype ThemeLoaderProps = {\n  children: React.ReactNode;\n};\n\n/**\n * Provides the current UI theme to all children (via context),\n * ensuring that it is one of the valid values in `Theme`.\n */\nfunction ThemeLoader({ children }: ThemeLoaderProps): React.ReactElement {\n  const [theme, setTheme] = useCookieWithDefault('theme', 'dark');\n  const correctedTheme = isTheme(theme) ? theme : 'dark';\n\n  // Ensure that the stored theme is valid; otherwise reset it\n  useEffect(() => {\n    if (theme !== correctedTheme) {\n      setTheme(correctedTheme);\n    }\n  }, [theme, correctedTheme, setTheme]);\n\n  const themeContextValue = useMemo<ThemeContextValue>(\n    () => [correctedTheme, setTheme],\n    [correctedTheme, setTheme]\n  );\n\n  // Add the current theme as a class on the body element\n  useBodyClass(theme);\n\n  return (\n    <ThemeContext.Provider value={themeContextValue}>\n      {children}\n    </ThemeContext.Provider>\n  );\n}\n\ntype AppCSSRootProps = {\n  children?: React.ReactNode;\n};\n\n/**\n * Mounts the outer `div.App` that is used to control global CSS selectors\n * such as `.App.mobile`.\n */\nfunction AppCSSRoot({ children }: AppCSSRootProps): React.ReactElement {\n  // Re-render when the page is re-sized to become mobile/desktop\n  // (desktop is >= 1024 px wide)\n  const mobile = useMobile();\n\n  return <div className={classes('App', mobile && 'mobile')}>{children}</div>;\n}\n","import { useLayoutEffect } from 'react';\n\n/**\n * Adds the given class(es) to the HTML `body` element\n * when this hook runs.\n */\nexport default function useBodyClass(className: string | string[]): void {\n  useLayoutEffect(() => {\n    if (typeof className === 'string') {\n      document.body.classList.add(className);\n    } else {\n      document.body.classList.add(...className);\n    }\n\n    return (): void => {\n      if (typeof className === 'string') {\n        document.body.classList.remove(className);\n      } else {\n        document.body.classList.remove(...className);\n      }\n    };\n  }, [className]);\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport * as Sentry from '@sentry/react';\nimport { Integrations } from '@sentry/tracing';\n\nimport App from './components/App';\n\nimport 'normalize.css';\nimport './stylesheet.scss';\n\n// Only initialize sentry on production\nif (process.env.NODE_ENV === 'production') {\n  // eslint-disable-next-line no-console\n  console.log('Initializing Sentry');\n  Sentry.init({\n    dsn: 'https://8955ef982197469e97c7644a8c090db1@o552970.ingest.sentry.io/5679614',\n    integrations: [new Integrations.BrowserTracing()],\n    tracesSampleRate: 1.0,\n    ignoreErrors: ['ResizeObserver loop limit exceeded'],\n    release: process.env['REACT_APP_SENTRY_VERSION'],\n  });\n}\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}